webpackJsonp([1],{319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n.n(a),o=n(6),i=(n.n(o),n(743)),s=n(747),l=n(748),c=n(749),u=n(370),d=n(371),p=n(372),m=n(439),h=n(442),f=n(443),E=n(373),b=n(18),g=n(19),y=function(e){var t=e.match;return r.a.createElement(a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement("div",{className:"app-main"},r.a.createElement(g.a,null),r.a.createElement("div",{className:"app-main__outer"},r.a.createElement("div",{className:"app-main__inner"},r.a.createElement(o.Route,{path:""+t.url,component:i.a}),r.a.createElement(o.Route,{path:t.url+"/nouveau",component:c.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile",component:s.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/edition",component:l.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/adresses",component:u.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/animaux",component:d.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/abonnements",component:p.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/commandes",component:m.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/factures",component:h.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/paiements",component:f.a}),r.a.createElement(o.Route,{path:t.url+"/:userId/profile/commentaires",component:E.a})))))};t.default=y},370:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),c=n(2),u=(n.n(c),n(5)),d=n.n(u),p=n(4),m=n.n(p),h=n(1),f=n(7),E=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match.params.userId,n.orderId=e.match.params.orderId,n.invoiceId=e.match.params.invoiceId,n.state={user:{},addresses:[],collapse:null,addressSelected:null},n.toggle=n.toggle.bind(n),n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.chooseAddress=n.chooseAddress.bind(n),n}return i(t,e),E(t,[{key:"handleChange",value:function(e){var t=e.target.getAttribute("index"),n=e.target,r=n.name,o=n.value,i=[].concat(a(this.state.addresses)),s=Object.assign({},i[t]);s[r]=o,i[t]=s,this.setState({addresses:i})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateAddress(e.target.id,e.target.getAttribute("index"))}},{key:"formatData",value:function(e){var t=this.state.addresses[e];return delete t.id,delete t.created_date,delete t.user,delete t.active,t}},{key:"updateAddress",value:function(e,n){d()({method:"PATCH",data:this.formatData(n),url:"https://api.miamnimaux.com"+t.EDIT_ADDRESS_URL+"/"+e,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(e){f.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !")}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"chooseAddress",value:function(e,n){var a=this;e.preventDefault(),d()({method:"PATCH",url:"https://api.miamnimaux.com"+t.CHOOSE_ADDRESS_URL+"/"+n,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(e){a.setState({addresses:e.data}),f.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !")}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"getAddresses",value:function(){var e=this,n=t.GET_ADDRESSES_URL+"/"+this.userId;null!==this.orderId&&"undefined"!==typeof this.orderId&&(n=t.GET_ADDRESS_ORDER_URL+"/"+this.orderId),null!==this.invoiceId&&"undefined"!==typeof this.invoiceId&&(n=t.GET_ADDRESS_INVOICE_URL+"/"+this.invoiceId),d()({method:"GET",url:"https://api.miamnimaux.com"+n,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({addresses:t.data}),e.setState({addressSelected:t.data.find(function(e){return!0===e.active})})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"getUser",value:function(){var e=this;d()({method:"GET",url:"https://api.miamnimaux.com"+t.GET_USER_URL+"/"+this.userId,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({user:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"toggle",value:function(e){var t=e.target.dataset.event;this.setState({collapse:this.state.collapse===Number(t)?0:Number(t)})}},{key:"componentDidMount",value:function(){this.getAddresses(),null!==this.orderId&&"undefined"!==typeof this.orderId||null!==this.invoiceId&&"undefined"!==typeof this.invoiceId||this.getUser()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.userId=e.match.params.userId,this.orderId=e.match.params.orderId,this.invoiceId=e.match.params.invoiceId,this.getAddresses(),null!==this.orderId&&"undefined"!==typeof this.orderId||null!==this.invoiceId&&"undefined"!==typeof this.invoiceId||this.getUser()}},{key:"render",value:function(){var e=this,t=this.state.collapse;return l.a.createElement(s.Fragment,null,l.a.createElement(m.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},l.a.createElement(c.CardTitle,null,"Les adresses de ",this.state.user.firstname," ",this.state.user.lastname),this.state.addresses.map(function(n,a){return l.a.createElement(c.Form,{onSubmit:e.handleSubmit,key:n.id,id:n.id,index:a},l.a.createElement(c.Card,{className:"main-card mb-3"},l.a.createElement(c.CardHeader,null,l.a.createElement("div",{className:"w-100",onClick:e.toggle,"data-event":a},n.city,", ",n.postcode," - ",n.address," - ",n.phone,l.a.createElement("span",{className:"pull-right",id:"main"},!0===n.active?"Addresse par d\xe9faut":l.a.createElement("button",{onClick:function(t){return e.chooseAddress(t,n.id)},className:"btn btn-primary"},"Choisir")))),l.a.createElement(c.Collapse,{isOpen:t===a},l.a.createElement(c.CardBody,null,l.a.createElement(c.Row,{form:!0},l.a.createElement(c.Col,{md:4},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"country"},"Pays"),l.a.createElement(c.Input,{type:"text",name:"country",id:"country",value:n.country,index:a,onChange:e.handleChange,placeholder:"Pays"}))),l.a.createElement(c.Col,{md:5},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"city"},"Ville"),l.a.createElement(c.Input,{type:"text",name:"city",id:"city",value:n.city,index:a,onChange:e.handleChange,placeholder:"Ville"}))),l.a.createElement(c.Col,{md:3},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"postcode"},"Code postal"),l.a.createElement(c.Input,{type:"text",name:"postcode",id:"postcode",value:n.postcode,index:a,onChange:e.handleChange,placeholder:"Code postal"}))),l.a.createElement(c.Col,{md:8},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"address"},"Address"),l.a.createElement(c.Input,{type:"text",name:"address",id:"address",value:n.address,index:a,onChange:e.handleChange,placeholder:"Adresse"}))),l.a.createElement(c.Col,{md:4},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"phone"},"T\xe9l\xe9phone"),l.a.createElement(c.Input,{type:"text",name:"phone",id:"phone",value:n.phone,index:a,onChange:e.handleChange,placeholder:"T\xe9l\xe9phone"}))),l.a.createElement(c.Col,{md:12},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"notes"},"Notes"),l.a.createElement(c.Input,{type:"textarea",name:"notes",id:"notes",value:n.notes,index:a,onChange:e.handleChange,placeholder:"Notes"})))),l.a.createElement(c.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour")))))})))}}]),t}(l.a.Component);b.GET_USER_URL="/api/user",b.GET_ADDRESSES_URL="/api/addresses/user",b.GET_ADDRESS_ORDER_URL="/api/address/order",b.GET_ADDRESS_INVOICE_URL="/api/address/invoice",b.EDIT_ADDRESS_URL="/api/address",b.CHOOSE_ADDRESS_URL="/api/address/choose",t.a=b},371:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(6),p=(n.n(d),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(d.Link,{to:"/animaux/"+e.id+"/profile/edition"},e.id))}},{Header:"Nom",Footer:"Nom",accessor:"name"},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Esp\xe8ce",Footer:"Esp\xe8ce",accessor:function(e){return s.a.createElement(d.Link,{to:"/especes/"+e.type.id+"/profile/edition"},e.type.name)}},{Header:"Race",Footer:"Race",accessor:function(e){return s.a.createElement(d.Link,{to:"/races/"+e.breeds.id+"/profile/edition"},e.breeds.name)}},{Header:"Sexe",Footer:"Sexe",accessor:"sexe"},{Header:"Age",Footer:"Age",accessor:function(e){return e.age+" ans "+e.month+" mois"}},{Header:"Poids",Footer:"Poids",accessor:function(e){return e.weight}},{Header:"St\xe9rilis\xe9",Footer:"St\xe9rilis\xe9",accessor:function(e){return e.neutered?"Oui":"Non"}},{Header:"Gestation",Footer:"Gestation",accessor:function(e){return e.pregnant?"Oui":"Non"}},{Header:"Activit\xe9",Footer:"Activit\xe9",accessor:function(e){return 0===e.activity?"peu actif":1===e.activity?"actif":"tr\xe8s actif"}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}}],E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.subscriptionId=e.match?e.match.params.subscriptionId:null,n.loading=!1,n.pageCount=0,n.state={pets:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getPets(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.pets}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getPets(t,e*t,n),this.loading=!1}},{key:"getPets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_PETS_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_PETS_URL+this.userId:"undefined"!==typeof this.subscriptionId&&null!==this.subscriptionId&&(o=t.GET_SUB_PETS_URL+this.subscriptionId),o+="?limit="+e+"&offset="+a+"&query="+r,u()({method:"get",url:"https://api.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.petsTotal/e),n.setState({pets:t.data.pets}),n.state.pets}).catch(function(e){401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(l.Row,null,s.a.createElement(l.Col,{lg:"12"},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"animaux"),s.a.createElement(p.c,{data:null!=this.state.pets?this.state.pets:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);E.GET_ALL_PETS_URL="/api/pets",E.GET_USER_PETS_URL="/api/pet/user/",E.GET_SUB_PETS_URL="/api/pet/subscription/",t.a=E},372:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(6),p=(n.n(d),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(d.Link,{to:"/abonnements/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Animal",Footer:"Animal",accessor:function(e){return s.a.createElement(d.Link,{to:"/animaux/"+e.pet.id+"/profile/edition"},e.pet.name)}},{Header:"Formule",Footer:"Formule",accessor:function(e){return s.a.createElement(d.Link,{to:"/formules/"+e.price.formula.id+"/profile/edition"},e.price.formula.name)}},{Header:"Montant",Footer:"Montant",accessor:function(e){return e.amount+" \u20ac"}},{Header:"Stripe Id",Footer:"Stripe Id",accessor:"stripe_subscription_id"},{Header:"Statut",Footer:"Statut",accessor:function(e){return Object(p.a)(e.status,"running"===e.status?"success":"paused"===e.status?"warning":"cancelled"===e.status?"danger":"info")}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}}],E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.petId=e.match?e.match.params.petId:null,n.loading=!1,n.pageCount=0,n.state={subscriptions:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getSubscriptions(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.subscriptions}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getSubscriptions(t,e*t,n),this.loading=!1}},{key:"getSubscriptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_SUB_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_SUB_URL+this.userId:"undefined"!==typeof this.petId&&null!==this.petId&&(o=t.GET_PET_SUB_URL+this.petId),o+="?limit="+e+"&offset="+a+"&query="+r,u()({method:"get",url:"https://api.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.subscriptionsTotal/e),n.setState({subscriptions:t.data.subscriptions}),n.state.subscriptions}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(l.Row,null,s.a.createElement(l.Col,{lg:"12"},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Abonnements"),s.a.createElement(p.c,{data:null!=this.state.subscriptions?this.state.subscriptions:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);E.GET_ALL_SUB_URL="/api/subscriptions",E.GET_USER_SUB_URL="/api/subscription/user/",E.GET_PET_SUB_URL="/api/subscription/pet/",t.a=E},373:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(6),p=(n.n(d),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(d.Link,{to:"/commentaires/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Note",Footer:"Note",accessor:function(e){return s.a.createElement("span",{className:"score s"+e.note})}},{Header:"Commentaires",Footer:"Commentaires",accessor:"comment"},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}}],E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.orderId=e.match?e.match.params.orderId:null,n.loading=!1,n.pageCount=0,n.state={comments:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getComments(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.comments}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getComments(t,e*t,n),this.loading=!1}},{key:"getComments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_COMMENTS_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_COMMENTS_URL+this.userId:"undefined"!==typeof this.orderId&&null!==this.orderId&&(o=t.GET_ORDER_COMMENTS_URL+this.orderId),o+="?limit="+e+"&offset="+a+"&query="+r,u()({method:"GET",url:"https://api.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.commentsTotal/e),n.setState({comments:t.data.comments}),n.state.comments}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(l.Row,null,s.a.createElement(l.Col,{lg:"12"},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Commentaires"),s.a.createElement(p.c,{data:null!=this.state.comments?this.state.comments:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);E.GET_ALL_COMMENTS_URL="/api/comments",E.GET_USER_COMMENTS_URL="/api/comment/user/",E.GET_ORDER_COMMENTS_URL="/api/comment/order/",t.a=E},439:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(6),p=(n.n(d),n(16)),m=n(1),h=n(440),f=n(441),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),b=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(d.Link,{to:"/commandes/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Animal",Footer:"Animal",accessor:function(e){return s.a.createElement(d.Link,{to:"/animaux/"+e.pet.id+"/profile/edition"},e.pet.name)}},{Header:"Abonnement",Footer:"Abonnement",accessor:function(e){return s.a.createElement(d.Link,{to:"/abonnements/"+(e.subscription?e.subscription.id:"")+"/profile/edition"},"Abonnement ",e.subscription?e.subscription.price.formula.name:"")}},{Header:"Prix",Footer:"Prix",accessor:function(e){return e.price+"\u20ac"}},{Header:"Nb plats",Footer:"Nb plats",accessor:function(e){return""+e.nb_dishes}},{Header:"Livraison pr\xe9vue",Footer:"Livraison pr\xe9vue",accessor:function(e){return Object(p.b)(e.expected_delivery_date)}},{Header:"Grammes",Footer:"Grammes",accessor:function(e){return e.grams+"gr"}},{Header:"N\xb0 de suivi",Footer:"N\xb0 de suivi",accessor:"tracking_number"},{Header:"Facture",Footer:"Facture",accessor:function(e){return s.a.createElement(d.Link,{to:"/factures/"+(e.invoice?e.invoice.id:"")+"/profile/edition"},e.invoice?e.invoice.id:"")}},{Header:"Livraison",Footer:"Livraison",accessor:function(e){return Object(p.b)(e.delivery_date)}},{Header:"Statut",Footer:"Statut",accessor:function(e){return Object(p.a)(e.status,"validated"===e.status?"success":"in_preparation"===e.status?"secondary":"sent"===e.status?"alt":"delivered"===e.status?"info":"cancelled"===e.status?"danger":"primary")}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}},{Header:"Action",Footer:"Action",accessor:function(e){return s.a.createElement(f.a,{order_id:e.id,shipped:!!e.tracking_number})}}],g=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.subscriptionId=e.match?e.match.params.subscriptionId:null,n.loading=!1,n.pageCount=0,n.state={orders:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),E(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getOrders(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.orders}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getOrders(t,e*t,n),this.loading=!1}},{key:"getOrders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_ORDERS_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_ORDERS_URL+this.userId:"undefined"!==typeof this.subscriptionId&&null!==this.subscriptionId&&(o=t.GET_SUB_ORDERS_URL+this.subscriptionId),o+="?limit="+e+"&offset="+a+"&query="+r,u()({method:"get",url:"https://api.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.ordersTotal/e),n.setState({orders:t.data.orders}),n.state.orders}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(l.Row,null,s.a.createElement(l.Col,{lg:"12"},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Commandes"),s.a.createElement(h.a,null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(p.c,{className:"pull-right",data:null!=this.state.orders?this.state.orders:[],columns:b,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);g.GET_ALL_ORDERS_URL="/api/orders",g.GET_USER_ORDERS_URL="/api/order/user/",g.GET_SUB_ORDERS_URL="/api/order/subscription/",t.a=g},440:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(32),c=(n.n(l),n(33)),u=(n.n(c),n(2)),d=(n.n(u),n(5)),p=n.n(d),m=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modal:!1,exportData:{}},n.toggle=n.toggle.bind(n),n.handleChange=n.handleChange.bind(n),n}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var n=t,a=n.name,r=n.value,o=(n.label,this.state.exportData);o[a]="checkbox"===t.type?t.checked:r,this.setState({exportData:o})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"exportOrder",value:function(e){var n="production"===e?t.EXPORT_PROD_ORDERS:t.EXPORT_ORDERS;p()({method:"POST",data:this.state.exportData,url:"https://api.miamnimaux.com"+n,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(e){window.location.href=e.data}).catch(function(e){e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"render",value:function(){var e=this;return s.a.createElement("span",{className:"d-inline-block mb-2 mr-2 pull-right"},s.a.createElement(u.Button,{className:"btn btn-info mr-3",color:"primary",onClick:this.toggle},s.a.createElement(c.FontAwesomeIcon,{className:"mr-1",icon:l.faPlus}),"Export Commandes"),s.a.createElement(u.Modal,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},s.a.createElement(u.ModalHeader,{toggle:this.toggle},"Export des commandes"),s.a.createElement(u.ModalBody,null,s.a.createElement(u.Form,{onSubmit:this.handleSubmit},s.a.createElement(u.Row,{form:!0},s.a.createElement(u.Col,{md:5},s.a.createElement(u.Label,{htmlFor:"send-email"},"Envoi email au traiteur")),s.a.createElement(u.Col,{md:7,className:"pl-5"},s.a.createElement(u.Input,{id:"send-email",name:"send-email",type:"checkbox",onChange:this.handleChange}))),s.a.createElement(u.Row,null,s.a.createElement(u.Col,{md:5},s.a.createElement(u.Label,{htmlFor:"update-orders"},"Mise \xe0 jour auto du statut de la commande")),s.a.createElement(u.Col,{md:7,className:"pl-5"},s.a.createElement(u.Input,{id:"update-orders",name:"update-orders",type:"checkbox",onChange:this.handleChange}))),s.a.createElement(u.Row,null,s.a.createElement(u.Col,{md:5},s.a.createElement(u.Label,{for:"status"},"Statut")),s.a.createElement(u.Col,{md:7},s.a.createElement(u.Input,{type:"select",name:"status",id:"status",onChange:this.handleChange,placeholder:"Statut"},s.a.createElement("option",{value:"created"},"Cr\xe9e"),s.a.createElement("option",{value:"validated"},"Valid\xe9"),s.a.createElement("option",{value:"in_preparation"},"En pr\xe9paration"),s.a.createElement("option",{value:"send"},"Envoy\xe9"),s.a.createElement("option",{value:"delivered"},"Livr\xe9"),s.a.createElement("option",{value:"cancelled"},"Annul\xe9")))),s.a.createElement(u.Row,null,s.a.createElement(u.Col,{md:5},s.a.createElement(u.Label,{for:"date-from"},"Date d\xe9but")),s.a.createElement(u.Col,{md:7},s.a.createElement(u.Input,{type:"date",name:"date-from",id:"date-from",onChange:this.handleChange,placeholder:"Date d\xe9but"}))),s.a.createElement(u.Row,null,s.a.createElement(u.Col,{md:5},s.a.createElement(u.Label,{for:"date-to"},"Date fin")),s.a.createElement(u.Col,{md:7},s.a.createElement(u.Input,{type:"date",name:"date-to",id:"date-to",onChange:this.handleChange,placeholder:"Date fin"}))),s.a.createElement(u.Button,{color:"primary",type:"submit",onClick:function(t){t.preventDefault(),e.exportOrder("production")},className:"mt-2 pull-right"},"Exporter Production"),s.a.createElement(u.Button,{color:"primary",type:"submit",onClick:function(t){t.preventDefault(),e.exportOrder("orders")},className:"mt-2 pull-right"},"Exporter Commandes")))))}}]),t}(s.a.Component);E.EXPORT_PROD_ORDERS="/api/orders/production/export",E.EXPORT_ORDERS="/api/orders/export",t.a=E},441:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(32)),u=(n.n(c),n(33)),d=(n.n(u),n(1)),p=n(5),m=n.n(p),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modalShip:!1,modalTrack:!1,ship:{order_id:e.order_id},trackEvents:{},shipped:e.shipped},n.toggleShip=n.toggleShip.bind(n),n.toggleTrack=n.toggleTrack.bind(n),n.cancel=n.cancel.bind(n),n.handleChange=n.handleChange.bind(n),n}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var n=t,a=n.name,r=n.value,o=(n.label,this.state.ship);o[a]="checkbox"===t.type?t.checked:r,this.setState({ship:o})}},{key:"ship",value:function(){m()({method:"POST",data:this.state.ship,url:"https://api.miamnimaux.com"+t.SHIP_ORDER,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(e){h.toast.success("Le bordereau \xe0 bien \xe9t\xe9 g\xe9n\xe9r\xe9")}).catch(function(e){console.log(e),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"track",value:function(){var e=this;m()({method:"POST",data:this.state.ship,url:"https://api.miamnimaux.com"+t.TRACK_ORDER,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({trackEvents:t.data.events})}).catch(function(e){e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.error):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"cancel",value:function(){m()({method:"POST",data:this.state.ship,url:"https://api.miamnimaux.com"+t.CANCEL_ORDER,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"text/csv"}}).then(function(e){h.toast.success("L'annulation \xe0 bien \xe9t\xe9 prise en compte")}).catch(function(e){e.response?h.toast.error("Une erreur s'est produite: "+e.response.data.error):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"toggleShip",value:function(){this.setState({modalShip:!this.state.modalShip})}},{key:"toggleTrack",value:function(){this.track(),this.setState({modalTrack:!this.state.modalTrack})}},{key:"render",value:function(){var e=this;return s.a.createElement(i.Fragment,null,s.a.createElement("div",{className:"header-btn-lg pr-0"},s.a.createElement("div",{className:"widget-content p-0"},s.a.createElement("div",{className:"widget-content-wrapper"},s.a.createElement("div",{className:"widget-content-left"},s.a.createElement(l.UncontrolledButtonDropdown,null,s.a.createElement(l.DropdownToggle,{color:"link",className:"p-0"},s.a.createElement(u.FontAwesomeIcon,{className:"text-center",icon:c.faEllipsisV})),s.a.createElement(l.DropdownMenu,{right:!0,className:"rm-pointers dropdown-menu-lg"},s.a.createElement(l.Nav,{vertical:!0},s.a.createElement(l.NavItem,{className:this.state.shipped?"d-none":""},s.a.createElement("a",{className:"mr-3 dropdown-item",color:"primary",onClick:this.toggleShip},s.a.createElement(u.FontAwesomeIcon,{className:"mr-1",icon:c.faPaperPlane}),"Envoyer colis")),s.a.createElement(l.NavItem,{className:this.state.shipped?"":"d-none"},s.a.createElement("a",{className:"mr-3 dropdown-item",color:"primary",onClick:this.toggleTrack},s.a.createElement(u.FontAwesomeIcon,{className:"mr-1",icon:c.faTruck}),"Suivre le colis")),s.a.createElement(l.NavItem,{className:this.state.shipped?"":"d-none"},s.a.createElement("a",{className:"mr-3 dropdown-item",color:"primary",onClick:this.cancel},s.a.createElement(u.FontAwesomeIcon,{className:"mr-1",icon:c.faBan}),"Annuler l'envoi"))))))))),s.a.createElement(l.Modal,{isOpen:this.state.modalShip,toggle:this.toggleShip},s.a.createElement(l.ModalHeader,{toggle:this.toggleShip},"Envoyer le colis"),s.a.createElement(l.ModalBody,null,s.a.createElement(l.Form,null,s.a.createElement(l.Row,null,s.a.createElement(l.Col,{md:5},s.a.createElement(l.Label,{for:"shipment_date"},"Date d'enl\xe8vement")),s.a.createElement(l.Col,{md:7},s.a.createElement(l.Input,{type:"date",name:"shipment_date",id:"shipment_date",onChange:this.handleChange,placeholder:"Date d'enl\xe8vement"}))),s.a.createElement(l.Button,{color:"primary",type:"submit",onClick:function(t){t.preventDefault(),e.ship()},className:"mt-2 pull-right"},"G\xe9n\xe9rer le bordereaux")))),s.a.createElement(l.Modal,{isOpen:this.state.modalTrack,toggle:this.toggleTrack},s.a.createElement(l.ModalHeader,{toggle:this.toggleTrack},"Suivi du colis"),s.a.createElement(l.ModalBody,null,s.a.createElement(l.Table,{className:"table table-condensed table-hover",cellSpacing:"0"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Date"),s.a.createElement("th",null,"Evenement"),s.a.createElement("th",null,"Location"),s.a.createElement("th",null,"Code"))),s.a.createElement("tbody",null,this.state.events?this.state.events.map(function(e){return s.a.createElement("tr",null,s.a.createElement("td",{style:"text-align: left;"},"$",e.date),s.a.createElement("td",{style:"text-align: left;"},"$",e.description),s.a.createElement("td",{style:"text-align: left;"},"$",e.location),s.a.createElement("td",{style:"text-align: left;"},"$",e.code))}):s.a.createElement("tr",null,s.a.createElement("td",{colspan:"4"},"Aucun evenement")))))))}}]),t}(s.a.Component);E.RATE_ORDER="/api/carrier/rate",E.SHIP_ORDER="/api/carrier/ship",E.CANCEL_ORDER="/api/carrier/cancel",E.TRACK_ORDER="/api/carrier/track",t.a=E},442:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(6),p=(n.n(d),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(d.Link,{to:"/factures/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Montant",Footer:"Montant",accessor:function(e){return e.amount+"\u20ac"}},{Header:"Statut",Footer:"Statut",accessor:function(e){return Object(p.a)("paid"===e.status?"Pay\xe9":"pending"===e.status?"En attente":"Brouillon","success")}},{Header:"Commandes",Footer:"Commandes",accessor:function(e){return s.a.createElement(d.Link,{to:"/commandes/"+e.order.id+"/profile/edition"},e.order?e.order.id:"")}},{Header:"Avoir",Footer:"Avoir",accessor:function(e){return s.a.createElement(d.Link,{to:"/factures/"+(e.credit_note?e.credit_note.id:"")+"/profile/edition"},e.credit_note?e.credit_note.id:"")}},{Header:"Paiement",Footer:"Paiement",accessor:function(e){return s.a.createElement(d.Link,{to:"/paiements/"+(e.payment?e.payment.id:"")+"/profile/edition"},e.payment?e.payment.id:"")}},{Header:"Stripe Id",Footer:"Stripe Id",accessor:"delivery_date"},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}}],E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.orderId=e.match?e.match.params.orderId:null,n.loading=!1,n.pageCount=0,n.state={invoices:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getInvoices(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.invoices}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getInvoices(t,e*t,n),this.loading=!1}},{key:"getInvoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_INVOICES_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_INVOICES_URL+this.userId:"undefined"!==typeof this.orderId&&null!==this.orderId&&(o=t.GET_ORDER_INVOICES_URL+this.orderId),o+="?limit="+e+"&offset="+a+"&query="+r,u()({method:"get",url:"https://api.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.invoicesTotal/e),n.setState({invoices:t.data.invoices}),n.state.invoices}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(l.Row,null,s.a.createElement(l.Col,{lg:"12"},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Factures"),s.a.createElement(p.c,{data:null!=this.state.invoices?this.state.invoices:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);E.GET_ALL_INVOICES_URL="/api/invoices",E.GET_USER_INVOICES_URL="/api/invoice/user/",E.GET_ORDER_INVOICES_URL="/api/invoice/order/",t.a=E},443:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(6),p=(n.n(d),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(d.Link,{to:"/paiements/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Facture",Footer:"Facture",accessor:function(e){return e.invoice?s.a.createElement(d.Link,{to:"/factures/"+e.invoice.id+"/profile/edition"},e.invoice.id," (",e.invoice.amount,"\u20ac)"):""}},{Header:"Montant",Footer:"Montant",accessor:function(e){return e.amount+"\u20ac"}},{Header:"Stripe Id",Footer:"Stripe Id",accessor:function(e){return s.a.createElement(d.Link,{to:{pathname:""+e.stripe_receipt_url},target:"_blank"},e.stripe_payment_id)}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}}],E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.invoiceId=e.match?e.match.params.invoiceId:null,n.loading=!1,n.pageCount=0,n.state={payments:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getPayments(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.payments}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getPayments(t,e*t,n),this.loading=!1}},{key:"getPayments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_PAYMENTS_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_PAYMENTS_URL+this.userId:"undefined"!==typeof this.invoiceId&&null!==this.invoiceId&&(o=t.GET_INVOICE_PAYMENTS_URL+this.invoiceId),o+="?limit="+e+"&offset="+a+"&query="+r,u()({method:"get",url:"https://api.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.paymentsTotal/e),n.setState({payments:t.data.payments}),n.state.payments}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(l.Row,null,s.a.createElement(l.Col,{lg:"12"},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Paiements"),s.a.createElement(p.c,{data:null!=this.state.payments?this.state.payments:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);E.GET_ALL_PAYMENTS_URL="/api/payments",E.GET_USER_PAYMENTS_URL="/api/payment/user/",E.GET_INVOICE_PAYMENTS_URL="/api/payment/invoice/",t.a=E},743:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(4),c=n.n(l),u=n(17),d=n(744),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:[]},n}return o(t,e),p(t,[{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(u.a,{heading:"Liste des utilisateurs",subheading:"",icon:"pe-7s-drawer icon-gradient bg-happy-itmeo",addLink:"/utilisateurs/nouveau"}),s.a.createElement(c.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(d.a,this.props)))}}]),t}(s.a.Component);t.a=m},744:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(5),c=n.n(l),u=n(6),d=(n.n(u),n(1)),p=n(16),m=n(745),h=n(2),f=(n.n(h),n(746)),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),b=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(u.Link,{to:"/utilisateurs/"+e.id+"/profile/edition"},e.id))}},{Header:"Pr\xe9nom",Footer:"Pr\xe9nom",accessor:"firstname"},{Header:"Nom",Footer:"Nom",accessor:"lastname"},{Header:"Email",Footer:"Email",accessor:"email"},{Header:"Role",Footer:"Role",accessor:function(e){return Object(p.a)(e.roles?e.roles.slice(-1).toString().replace("ROLE_",""):"","secondary")}},{Header:"Code apporteur",Footer:"Code apporteur",accessor:function(e){return Object(p.a)(e.apporteur_code?e.apporteur_code:"",e.apporteur_code?"info":"")}},{Header:"Actif",Footer:"Actif",accessor:function(e){return Object(p.a)(e.active?"actif":"non actif",e.active?"success":"danger")}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}},{Header:"Action",Footer:"Action",accessor:function(e){return s.a.createElement(m.a,{user:e.email})}}],g=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loading=!1,n.pageCount=0,n.state={users:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),E(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getUsers(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.users}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getUsers(t,e*t,n),this.loading=!1}},{key:"getUsers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_USER_URL;o+="?limit="+e+"&offset="+a+"&query="+r,c()({method:"GET",url:"https://api.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.usersTotal/e),n.setState({users:t.data.users}),n.state.users}).catch(function(e){401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(h.Row,null,s.a.createElement(h.Col,{lg:"12"},s.a.createElement(h.Card,{className:"main-card mb-3"},s.a.createElement(h.CardBody,null,s.a.createElement(h.CardTitle,null,"Utilisateurs"),s.a.createElement(f.a,null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(p.c,{data:null!=this.state.users?this.state.users:[],columns:b,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);g.GET_ALL_USER_URL="/api/users",t.a=g},745:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(32)),u=(n.n(c),n(33)),d=(n.n(u),n(1)),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return o(t,e),p(t,[{key:"render",value:function(){var e="https://www.miamnimaux.com/impersonate/"+Object(d.b)().token+"/"+this.props.user;return s.a.createElement(i.Fragment,null,s.a.createElement("div",{className:"header-btn-lg pr-0"},s.a.createElement("div",{className:"widget-content p-0"},s.a.createElement("div",{className:"widget-content-wrapper"},s.a.createElement("div",{className:"widget-content-left"},s.a.createElement(l.UncontrolledButtonDropdown,null,s.a.createElement(l.DropdownToggle,{color:"link",className:"p-0"},s.a.createElement(u.FontAwesomeIcon,{className:"text-center",icon:c.faEllipsisV})),s.a.createElement(l.DropdownMenu,{right:!0,className:"rm-pointers dropdown-menu-lg"},s.a.createElement(l.Nav,{vertical:!0},s.a.createElement(l.NavItem,null,s.a.createElement("a",{className:"dropdown-item",href:e},"Personnifier"))))))))))}}]),t}(s.a.Component);t.a=m},746:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(32),c=(n.n(l),n(33)),u=(n.n(c),n(2)),d=(n.n(u),n(5)),p=n.n(d),m=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={modal:!1,exportData:{}},n.toggle=n.toggle.bind(n),n.handleChange=n.handleChange.bind(n),n}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var n=t,a=n.name,r=n.value,o=(n.label,this.state.exportData);o[a]="checkbox"===t.type?t.checked:r,this.setState({exportData:o})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"exportUser",value:function(){p()({method:"GET",url:"https://api.miamnimaux.com"+t.EXPORT_USERS+this.state.exportData.date_from+"/"+this.state.exportData.date_to,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"text/csv"}}).then(function(e){var t=new Blob([e.data.split(",")],{type:"text/csv"}),n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="export_user.csv",a.click(),setTimeout(function(){URL.revokeObjectURL(n)},1e3)}).catch(function(e){console.log(e),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"render",value:function(){var e=this;return s.a.createElement("span",{className:"d-inline-block mb-2 mr-2 pull-right"},s.a.createElement(u.Button,{className:"btn btn-info mr-3",color:"primary",onClick:this.toggle},s.a.createElement(c.FontAwesomeIcon,{className:"mr-1",icon:l.faPlus}),"Export utilisateurs"),s.a.createElement(u.Modal,{isOpen:this.state.modal,toggle:this.toggle},s.a.createElement(u.ModalHeader,{toggle:this.toggle},"Export des utilisateurs"),s.a.createElement(u.ModalBody,null,s.a.createElement(u.Form,null,s.a.createElement(u.Row,null,s.a.createElement(u.Col,{md:5},s.a.createElement(u.Label,{for:"date_from"},"Date d\xe9but")),s.a.createElement(u.Col,{md:7},s.a.createElement(u.Input,{type:"date",name:"date_from",id:"date_from",onChange:this.handleChange,placeholder:"Date d\xe9but"}))),s.a.createElement(u.Row,null,s.a.createElement(u.Col,{md:5},s.a.createElement(u.Label,{for:"date_to"},"Date fin")),s.a.createElement(u.Col,{md:7},s.a.createElement(u.Input,{type:"date",name:"date_to",id:"date_to",onChange:this.handleChange,placeholder:"Date fin"}))),s.a.createElement(u.Button,{color:"primary",type:"submit",onClick:function(t){t.preventDefault(),e.exportUser()},className:"mt-2 pull-right"},"Exporter utilisateurs")))))}}]),t}(s.a.Component);E.EXPORT_USERS="/api/user/export/",t.a=E},747:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(5),c=n.n(l),u=n(4),d=n.n(u),p=n(2),m=(n.n(p),n(1)),h=n(6),f=(n.n(h),n(7)),E=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),b=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match.params.userId,n.state={user:[],hasMenu:!0},n}return o(t,e),E(t,[{key:"getUser",value:function(){var e=this;c()({method:"GET",url:"https://api.miamnimaux.com"+t.GET_USER_URL+"/"+this.userId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({user:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getUser()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.userId=e.match.params.userId,this.getUser()}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(d.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(p.Row,null,s.a.createElement(p.Col,{md:"12"},s.a.createElement(p.Card,{className:"main-card mb-3"},s.a.createElement(p.CardBody,null,s.a.createElement(p.CardTitle,null,this.state.user.firstname," ",this.state.user.lastname," - ",this.state.user.email),this.state.hasMenu?s.a.createElement(g,{props:this.props}):""))))))}}]),t}(s.a.Component);b.GET_USER_URL="/api/user",t.a=b;var g=function(e){return s.a.createElement(p.Nav,{pills:!0,justified:!0},s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/edition"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/edition"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Edition")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/adresses"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/adresses"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Adresses")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/animaux"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/animaux"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Animaux")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/abonnements"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/abonnements"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Abonnements")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/commandes"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/commandes"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Commandes")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/factures"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/factures"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Factures")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/paiements"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/paiements"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Paiements")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/commentaires"?"active":"",tag:function(e){return s.a.createElement(h.Link,e)},to:e.props.match.url+"/commentaires"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Commentaires")))}},748:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(4),p=n.n(d),m=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match.params.userId,n.state={user:{}},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState(function(e){var o=Object.assign({},t.state.user);return o[a]="checkbox"===n.type?n.checked:r,{user:o}})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateUser()}},{key:"formatData",value:function(){var e=this.state.user;return delete e.id,delete e.avatar,delete e.deleted,delete e.stripe_customer_id,delete e.created_date,delete e.roles,delete e.phone,console.log(e),e}},{key:"updateUser",value:function(){var e=this;u()({method:"PATCH",data:this.formatData(),url:"https://api.miamnimaux.com"+t.EDIT_USER_URL+"/"+this.userId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){h.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !"),e.setState({user:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"getUser",value:function(){var e=this;u()({method:"GET",url:"https://api.miamnimaux.com"+t.GET_USER_URL+"/"+this.userId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({user:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getUser()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.userId=e.match.params.userId,this.getUser()}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(p.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Edition ",this.state.user.firstname," ",this.state.user.lastname),s.a.createElement(l.Form,{onSubmit:this.handleSubmit},s.a.createElement(l.Row,{form:!0},s.a.createElement(l.Col,{md:6},s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"email"},"Email"),s.a.createElement(l.Input,{type:"email",name:"email",id:"email",value:this.state.user.email||"",onChange:this.handleChange,placeholder:"User Email"}))),s.a.createElement(l.Col,{md:6},s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"password"},"Password"),s.a.createElement(l.Input,{type:"password",name:"password",id:"password",value:this.state.user.password||"",onChange:this.handleChange,placeholder:"User Password"})))),s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"firstname"},"Pr\xe9nom"),s.a.createElement(l.Input,{type:"text",name:"firstname",id:"firstname",value:this.state.user.firstname||"",onChange:this.handleChange,placeholder:"Pr\xe9nom"})),s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"lastname"},"Nom"),s.a.createElement(l.Input,{type:"text",name:"lastname",id:"lastname",value:this.state.user.lastname||"",onChange:this.handleChange,placeholder:"Nom de famille"})),s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"apporteur_code"},"Code apporteur"),s.a.createElement(l.Input,{type:"text",name:"apporteur_code",id:"apporteur_code",value:this.state.user.apporteur_code||"",onChange:this.handleChange,placeholder:"Code apporteur"})),s.a.createElement(l.FormGroup,null,s.a.createElement(l.CustomInput,{type:"checkbox",id:"active",name:"active",label:"Activ\xe9",defaultChecked:this.state.user.active,inline:!0,onChange:this.handleChange}),s.a.createElement(l.CustomInput,{type:"checkbox",id:"newsletter",name:"newsletter",label:"Newsletter",defaultChecked:this.state.user.newsletter,inline:!0,onChange:this.handleChange})),s.a.createElement(l.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour"))))))}}]),t}(s.a.Component);E.GET_USER_URL="/api/user",E.EDIT_USER_URL="/api/user",t.a=E},749:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(4),p=n.n(d),m=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initialState={firstname:"",lastname:"",password:"",email:"",preferred_delivery_day:"",preferred_delivery_time:"",active:!1,newsletter:!1},n.state={user:n.initialState},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value,r=this.state.user;r[n]=a,this.setState(r)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.postUser()}},{key:"postUser",value:function(){var e=this;u()({method:"POST",data:this.state.user,url:"https://api.miamnimaux.com"+t.POST_USER_URL,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){h.toast.success("L'utilisateur a bien \xe9t\xe9 ajout\xe9 !"),e.props.history.push("/utilisateurs")}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(p.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Nouvel utilisateur"),s.a.createElement(l.Form,{onSubmit:this.handleSubmit},s.a.createElement(l.Row,{form:!0},s.a.createElement(l.Col,{md:6},s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"email"},"Email"),s.a.createElement(l.Input,{type:"email",name:"email",id:"email",onChange:this.handleChange,placeholder:"User Email"}))),s.a.createElement(l.Col,{md:6},s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"password"},"Password"),s.a.createElement(l.Input,{type:"password",name:"password",id:"password",onChange:this.handleChange,placeholder:"User Password"})))),s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"firstname"},"Pr\xe9nom"),s.a.createElement(l.Input,{type:"text",name:"firstname",id:"firstname",onChange:this.handleChange,placeholder:"Pr\xe9nom"})),s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"lastname"},"Nom"),s.a.createElement(l.Input,{type:"text",name:"lastname",id:"lastname",onChange:this.handleChange,placeholder:"Nom de famille"})),s.a.createElement(l.FormGroup,null,s.a.createElement(l.CustomInput,{type:"checkbox",id:"active",name:"active",label:"Activ\xe9",inline:!0}),s.a.createElement(l.CustomInput,{type:"checkbox",id:"newsletter",name:"newsletter",label:"Newsletter",inline:!0})),s.a.createElement(l.Button,{color:"primary",type:"submit",className:"mt-2"},"Ajouter"))))))}}]),t}(s.a.Component);E.POST_USER_URL="/api/user",t.a=E}});