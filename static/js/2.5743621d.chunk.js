webpackJsonp([2],{323:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),n=a.n(r),o=a(6),l=(a.n(o),a(763)),i=a(764),s=a(765),c=a(766),u=a(370),d=a(115),p=a(373),m=a(18),h=a(19),f=a(767),E=function(e){var t=e.match;return n.a.createElement(r.Fragment,null,n.a.createElement(m.a,null),n.a.createElement("div",{className:"app-main"},n.a.createElement(h.a,null),n.a.createElement("div",{className:"app-main__outer"},n.a.createElement("div",{className:"app-main__inner"},n.a.createElement(o.Route,{path:""+t.url,component:c.a}),n.a.createElement(o.Route,{path:t.url+"/nouveau",component:s.a}),n.a.createElement(o.Route,{path:t.url+"/:orderId/profile",component:l.a}),n.a.createElement(o.Route,{path:t.url+"/:orderId/profile/edition",component:i.a}),n.a.createElement(o.Route,{path:t.url+"/:orderId/profile/recettes",component:d.a}),n.a.createElement(o.Route,{path:t.url+"/:orderId/profile/commentaire",component:p.a}),n.a.createElement(o.Route,{path:t.url+"/:orderId/profile/adresse-livraison",component:u.a}),n.a.createElement(o.Route,{path:t.url+"/:orderId/profile/etiquette",component:f.a}),n.a.createElement(o.Route,{path:t.url+"/:orderId/profile/bordereau",component:f.a})))))};t.default=E},370:function(e,t,a){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=a(0),s=a.n(i),c=a(2),u=(a.n(c),a(5)),d=a.n(u),p=a(4),m=a.n(p),h=a(1),f=a(7),E=(a.n(f),function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}()),b=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.userId=e.match.params.userId,a.orderId=e.match.params.orderId,a.invoiceId=e.match.params.invoiceId,a.state={user:{},addresses:[],collapse:null,addressSelected:null},a.toggle=a.toggle.bind(a),a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.chooseAddress=a.chooseAddress.bind(a),a}return l(t,e),E(t,[{key:"handleChange",value:function(e){var t=e.target.getAttribute("index"),a=e.target,n=a.name,o=a.value,l=[].concat(r(this.state.addresses)),i=Object.assign({},l[t]);i[n]=o,l[t]=i,this.setState({addresses:l})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateAddress(e.target.id,e.target.getAttribute("index"))}},{key:"formatData",value:function(e){var t=this.state.addresses[e];return delete t.id,delete t.created_date,delete t.user,delete t.active,t}},{key:"updateAddress",value:function(e,a){d()({method:"PATCH",data:this.formatData(a),url:"http://172.17.0.1:10000"+t.EDIT_ADDRESS_URL+"/"+e,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(e){f.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !")}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"chooseAddress",value:function(e,a){var r=this;e.preventDefault(),d()({method:"PATCH",url:"http://172.17.0.1:10000"+t.CHOOSE_ADDRESS_URL+"/"+a,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(e){r.setState({addresses:e.data}),f.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !")}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"getAddresses",value:function(){var e=this,a=t.GET_ADDRESSES_URL+"/"+this.userId;null!==this.orderId&&"undefined"!==typeof this.orderId&&(a=t.GET_ADDRESS_ORDER_URL+"/"+this.orderId),null!==this.invoiceId&&"undefined"!==typeof this.invoiceId&&(a=t.GET_ADDRESS_INVOICE_URL+"/"+this.invoiceId),d()({method:"GET",url:"http://172.17.0.1:10000"+a,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({addresses:t.data}),e.setState({addressSelected:t.data.find(function(e){return!0===e.active})})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"getUser",value:function(){var e=this;d()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_URL+"/"+this.userId,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({user:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"toggle",value:function(e){var t=e.target.dataset.event;this.setState({collapse:this.state.collapse===Number(t)?0:Number(t)})}},{key:"componentDidMount",value:function(){this.getAddresses(),null!==this.orderId&&"undefined"!==typeof this.orderId||null!==this.invoiceId&&"undefined"!==typeof this.invoiceId||this.getUser()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.userId=e.match.params.userId,this.orderId=e.match.params.orderId,this.invoiceId=e.match.params.invoiceId,this.getAddresses(),null!==this.orderId&&"undefined"!==typeof this.orderId||null!==this.invoiceId&&"undefined"!==typeof this.invoiceId||this.getUser()}},{key:"render",value:function(){var e=this,t=this.state.collapse;return s.a.createElement(i.Fragment,null,s.a.createElement(m.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(c.CardTitle,null,"Les adresses de ",this.state.user.firstname," ",this.state.user.lastname),this.state.addresses.map(function(a,r){return s.a.createElement(c.Form,{onSubmit:e.handleSubmit,key:a.id,id:a.id,index:r},s.a.createElement(c.Card,{className:"main-card mb-3"},s.a.createElement(c.CardHeader,null,s.a.createElement("div",{className:"w-100",onClick:e.toggle,"data-event":r},a.city,", ",a.postcode," - ",a.address," - ",a.phone,s.a.createElement("span",{className:"pull-right",id:"main"},!0===a.active?"Addresse par d\xe9faut":s.a.createElement("button",{onClick:function(t){return e.chooseAddress(t,a.id)},className:"btn btn-primary"},"Choisir")))),s.a.createElement(c.Collapse,{isOpen:t===r},s.a.createElement(c.CardBody,null,s.a.createElement(c.Row,{form:!0},s.a.createElement(c.Col,{md:4},s.a.createElement(c.FormGroup,null,s.a.createElement(c.Label,{for:"country"},"Pays"),s.a.createElement(c.Input,{type:"text",name:"country",id:"country",value:a.country,index:r,onChange:e.handleChange,placeholder:"Pays"}))),s.a.createElement(c.Col,{md:5},s.a.createElement(c.FormGroup,null,s.a.createElement(c.Label,{for:"city"},"Ville"),s.a.createElement(c.Input,{type:"text",name:"city",id:"city",value:a.city,index:r,onChange:e.handleChange,placeholder:"Ville"}))),s.a.createElement(c.Col,{md:3},s.a.createElement(c.FormGroup,null,s.a.createElement(c.Label,{for:"postcode"},"Code postal"),s.a.createElement(c.Input,{type:"text",name:"postcode",id:"postcode",value:a.postcode,index:r,onChange:e.handleChange,placeholder:"Code postal"}))),s.a.createElement(c.Col,{md:8},s.a.createElement(c.FormGroup,null,s.a.createElement(c.Label,{for:"address"},"Address"),s.a.createElement(c.Input,{type:"text",name:"address",id:"address",value:a.address,index:r,onChange:e.handleChange,placeholder:"Adresse"}))),s.a.createElement(c.Col,{md:4},s.a.createElement(c.FormGroup,null,s.a.createElement(c.Label,{for:"phone"},"T\xe9l\xe9phone"),s.a.createElement(c.Input,{type:"text",name:"phone",id:"phone",value:a.phone,index:r,onChange:e.handleChange,placeholder:"T\xe9l\xe9phone"}))),s.a.createElement(c.Col,{md:12},s.a.createElement(c.FormGroup,null,s.a.createElement(c.Label,{for:"notes"},"Notes"),s.a.createElement(c.Input,{type:"textarea",name:"notes",id:"notes",value:a.notes,index:r,onChange:e.handleChange,placeholder:"Notes"})))),s.a.createElement(c.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour")))))})))}}]),t}(s.a.Component);b.GET_USER_URL="/api/user",b.GET_ADDRESSES_URL="/api/addresses/user",b.GET_ADDRESS_ORDER_URL="/api/address/order",b.GET_ADDRESS_INVOICE_URL="/api/address/invoice",b.EDIT_ADDRESS_URL="/api/address",b.CHOOSE_ADDRESS_URL="/api/address/choose",t.a=b},373:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=a(2),c=(a.n(s),a(5)),u=a.n(c),d=a(6),p=(a.n(d),a(16)),m=a(1),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return i.a.createElement("b",null,i.a.createElement(d.Link,{to:"/commentaires/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return i.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,i.a.createElement("br",null),e.user.email)}},{Header:"Note",Footer:"Note",accessor:function(e){return i.a.createElement("span",{className:"score s"+e.note})}},{Header:"Commentaires",Footer:"Commentaires",accessor:"comment"},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}}],E=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.userId=e.match?e.match.params.userId:null,a.orderId=e.match?e.match.params.orderId:null,a.loading=!1,a.pageCount=0,a.state={comments:[]},a.fetchData=a.fetchData.bind(a),a.handleSearch=a.handleSearch.bind(a),a}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getComments(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.comments}},{key:"handleSearch",value:function(e,t,a){if(a.length<3&&0!==a.length)return null;this.loading=!0,this.getComments(t,e*t,a),this.loading=!1}},{key:"getComments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_COMMENTS_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_COMMENTS_URL+this.userId:"undefined"!==typeof this.orderId&&null!==this.orderId&&(o=t.GET_ORDER_COMMENTS_URL+this.orderId),o+="?limit="+e+"&offset="+r+"&query="+n,u()({method:"GET",url:"http://172.17.0.1:10000"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return a.pageCount=Math.ceil(t.data.commentsTotal/e),a.setState({comments:t.data.comments}),a.state.comments}).catch(function(e){console.log(e),401===e.response.status?a.props.history.push("/logout"):403===e.response.status&&a.props.history.goBack()})}},{key:"render",value:function(){return i.a.createElement(s.Row,null,i.a.createElement(s.Col,{lg:"12"},i.a.createElement(s.Card,{className:"main-card mb-3"},i.a.createElement(s.CardBody,null,i.a.createElement(s.CardTitle,null,"Commentaires"),i.a.createElement(p.c,{data:null!=this.state.comments?this.state.comments:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(i.a.Component);E.GET_ALL_COMMENTS_URL="/api/comments",E.GET_USER_COMMENTS_URL="/api/comment/user/",E.GET_ORDER_COMMENTS_URL="/api/comment/order/",t.a=E},439:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=a(2),c=(a.n(s),a(5)),u=a.n(c),d=a(6),p=(a.n(d),a(16)),m=a(1),h=a(440),f=a(441),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),b=[{Header:"#",Footer:"#",accessor:function(e){return i.a.createElement("b",null,i.a.createElement(d.Link,{to:"/commandes/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return i.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,i.a.createElement("br",null),e.user.email)}},{Header:"Animal",Footer:"Animal",accessor:function(e){return i.a.createElement(d.Link,{to:"/animaux/"+e.pet.id+"/profile/edition"},e.pet.name)}},{Header:"Abonnement",Footer:"Abonnement",accessor:function(e){return i.a.createElement(d.Link,{to:"/abonnements/"+(e.subscription?e.subscription.id:"")+"/profile/edition"},"Abonnement ",e.subscription?e.subscription.price.formula.name:"")}},{Header:"Prix",Footer:"Prix",accessor:function(e){return e.price+"\u20ac"}},{Header:"Nb plats",Footer:"Nb plats",accessor:function(e){return""+e.nb_dishes}},{Header:"Livraison pr\xe9vue",Footer:"Livraison pr\xe9vue",accessor:function(e){return Object(p.b)(e.expected_delivery_date)}},{Header:"Grammes",Footer:"Grammes",accessor:function(e){return e.grams+"gr"}},{Header:"N\xb0 de suivi",Footer:"N\xb0 de suivi",accessor:"tracking_number"},{Header:"Facture",Footer:"Facture",accessor:function(e){return i.a.createElement(d.Link,{to:"/factures/"+(e.invoice?e.invoice.id:"")+"/profile/edition"},e.invoice?e.invoice.id:"")}},{Header:"Livraison",Footer:"Livraison",accessor:function(e){return Object(p.b)(e.delivery_date)}},{Header:"Statut",Footer:"Statut",accessor:function(e){return Object(p.a)(e.status,"validated"===e.status?"success":"in_preparation"===e.status?"secondary":"sent"===e.status?"alt":"delivered"===e.status?"info":"cancelled"===e.status?"danger":"primary")}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}},{Header:"Action",Footer:"Action",accessor:function(e){return i.a.createElement(f.a,{order_id:e.id,shipped:!!e.tracking_number})}}],v=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.userId=e.match?e.match.params.userId:null,a.subscriptionId=e.match?e.match.params.subscriptionId:null,a.loading=!1,a.pageCount=0,a.state={orders:[]},a.fetchData=a.fetchData.bind(a),a.handleSearch=a.handleSearch.bind(a),a}return o(t,e),E(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getOrders(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.orders}},{key:"handleSearch",value:function(e,t,a){if(a.length<3&&0!==a.length)return null;this.loading=!0,this.getOrders(t,e*t,a),this.loading=!1}},{key:"getOrders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_ORDERS_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_ORDERS_URL+this.userId:"undefined"!==typeof this.subscriptionId&&null!==this.subscriptionId&&(o=t.GET_SUB_ORDERS_URL+this.subscriptionId),o+="?limit="+e+"&offset="+r+"&query="+n,u()({method:"get",url:"http://172.17.0.1:10000"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return a.pageCount=Math.ceil(t.data.ordersTotal/e),a.setState({orders:t.data.orders}),a.state.orders}).catch(function(e){console.log(e),401===e.response.status?a.props.history.push("/logout"):403===e.response.status&&a.props.history.goBack()})}},{key:"render",value:function(){return i.a.createElement(s.Row,null,i.a.createElement(s.Col,{lg:"12"},i.a.createElement(s.Card,{className:"main-card mb-3"},i.a.createElement(s.CardBody,null,i.a.createElement(s.CardTitle,null,"Commandes"),i.a.createElement(h.a,null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(p.c,{className:"pull-right",data:null!=this.state.orders?this.state.orders:[],columns:b,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(i.a.Component);v.GET_ALL_ORDERS_URL="/api/orders",v.GET_USER_ORDERS_URL="/api/order/user/",v.GET_SUB_ORDERS_URL="/api/order/subscription/",t.a=v},440:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=a(32),c=(a.n(s),a(33)),u=(a.n(c),a(2)),d=(a.n(u),a(5)),p=a.n(d),m=a(1),h=a(7),f=(a.n(h),function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}()),E=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={modal:!1,exportData:{}},a.toggle=a.toggle.bind(a),a.handleChange=a.handleChange.bind(a),a}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var a=t,r=a.name,n=a.value,o=(a.label,this.state.exportData);o[r]="checkbox"===t.type?t.checked:n,this.setState({exportData:o})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"exportOrder",value:function(e){var a="production"===e?t.EXPORT_PROD_ORDERS:t.EXPORT_ORDERS;p()({method:"POST",data:this.state.exportData,url:"http://172.17.0.1:10000"+a,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(e){window.location.href=e.data}).catch(function(e){e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"render",value:function(){var e=this;return i.a.createElement("span",{className:"d-inline-block mb-2 mr-2 pull-right"},i.a.createElement(u.Button,{className:"btn btn-info mr-3",color:"primary",onClick:this.toggle},i.a.createElement(c.FontAwesomeIcon,{className:"mr-1",icon:s.faPlus}),"Export Commandes"),i.a.createElement(u.Modal,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},i.a.createElement(u.ModalHeader,{toggle:this.toggle},"Export des commandes"),i.a.createElement(u.ModalBody,null,i.a.createElement(u.Form,{onSubmit:this.handleSubmit},i.a.createElement(u.Row,{form:!0},i.a.createElement(u.Col,{md:5},i.a.createElement(u.Label,{htmlFor:"send-email"},"Envoi email au traiteur")),i.a.createElement(u.Col,{md:7,className:"pl-5"},i.a.createElement(u.Input,{id:"send-email",name:"send-email",type:"checkbox",onChange:this.handleChange}))),i.a.createElement(u.Row,null,i.a.createElement(u.Col,{md:5},i.a.createElement(u.Label,{htmlFor:"update-orders"},"Mise \xe0 jour auto du statut de la commande")),i.a.createElement(u.Col,{md:7,className:"pl-5"},i.a.createElement(u.Input,{id:"update-orders",name:"update-orders",type:"checkbox",onChange:this.handleChange}))),i.a.createElement(u.Row,null,i.a.createElement(u.Col,{md:5},i.a.createElement(u.Label,{for:"status"},"Statut")),i.a.createElement(u.Col,{md:7},i.a.createElement(u.Input,{type:"select",name:"status",id:"status",onChange:this.handleChange,placeholder:"Statut"},i.a.createElement("option",{value:"created"},"Cr\xe9e"),i.a.createElement("option",{value:"validated"},"Valid\xe9"),i.a.createElement("option",{value:"in_preparation"},"En pr\xe9paration"),i.a.createElement("option",{value:"send"},"Envoy\xe9"),i.a.createElement("option",{value:"delivered"},"Livr\xe9"),i.a.createElement("option",{value:"cancelled"},"Annul\xe9")))),i.a.createElement(u.Row,null,i.a.createElement(u.Col,{md:5},i.a.createElement(u.Label,{for:"date-from"},"Date d\xe9but")),i.a.createElement(u.Col,{md:7},i.a.createElement(u.Input,{type:"date",name:"date-from",id:"date-from",onChange:this.handleChange,placeholder:"Date d\xe9but"}))),i.a.createElement(u.Row,null,i.a.createElement(u.Col,{md:5},i.a.createElement(u.Label,{for:"date-to"},"Date fin")),i.a.createElement(u.Col,{md:7},i.a.createElement(u.Input,{type:"date",name:"date-to",id:"date-to",onChange:this.handleChange,placeholder:"Date fin"}))),i.a.createElement(u.Button,{color:"primary",type:"submit",onClick:function(t){t.preventDefault(),e.exportOrder("production")},className:"mt-2 pull-right"},"Exporter Production"),i.a.createElement(u.Button,{color:"primary",type:"submit",onClick:function(t){t.preventDefault(),e.exportOrder("orders")},className:"mt-2 pull-right"},"Exporter Commandes")))))}}]),t}(i.a.Component);E.EXPORT_PROD_ORDERS="/api/orders/production/export",E.EXPORT_ORDERS="/api/orders/export",t.a=E},441:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=a(2),c=(a.n(s),a(32)),u=(a.n(c),a(33)),d=(a.n(u),a(1)),p=a(5),m=a.n(p),h=a(7),f=(a.n(h),function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}()),E=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={modalShip:!1,modalTrack:!1,ship:{order_id:e.order_id},trackEvents:{},shipped:e.shipped},a.toggleShip=a.toggleShip.bind(a),a.toggleTrack=a.toggleTrack.bind(a),a.cancel=a.cancel.bind(a),a.handleChange=a.handleChange.bind(a),a}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var a=t,r=a.name,n=a.value,o=(a.label,this.state.ship);o[r]="checkbox"===t.type?t.checked:n,this.setState({ship:o})}},{key:"ship",value:function(){m()({method:"POST",data:this.state.ship,url:"http://172.17.0.1:10000"+t.SHIP_ORDER,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(e){h.toast.success("Le bordereau \xe0 bien \xe9t\xe9 g\xe9n\xe9r\xe9")}).catch(function(e){console.log(e),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"track",value:function(){var e=this;m()({method:"POST",data:this.state.ship,url:"http://172.17.0.1:10000"+t.TRACK_ORDER,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({trackEvents:t.data.events})}).catch(function(e){e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.error):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"cancel",value:function(){m()({method:"POST",data:this.state.ship,url:"http://172.17.0.1:10000"+t.CANCEL_ORDER,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"text/csv"}}).then(function(e){h.toast.success("L'annulation \xe0 bien \xe9t\xe9 prise en compte")}).catch(function(e){e.response?h.toast.error("Une erreur s'est produite: "+e.response.data.error):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"toggleShip",value:function(){this.setState({modalShip:!this.state.modalShip})}},{key:"toggleTrack",value:function(){this.track(),this.setState({modalTrack:!this.state.modalTrack})}},{key:"render",value:function(){var e=this;return i.a.createElement(l.Fragment,null,i.a.createElement("div",{className:"header-btn-lg pr-0"},i.a.createElement("div",{className:"widget-content p-0"},i.a.createElement("div",{className:"widget-content-wrapper"},i.a.createElement("div",{className:"widget-content-left"},i.a.createElement(s.UncontrolledButtonDropdown,null,i.a.createElement(s.DropdownToggle,{color:"link",className:"p-0"},i.a.createElement(u.FontAwesomeIcon,{className:"text-center",icon:c.faEllipsisV})),i.a.createElement(s.DropdownMenu,{right:!0,className:"rm-pointers dropdown-menu-lg"},i.a.createElement(s.Nav,{vertical:!0},i.a.createElement(s.NavItem,{className:this.state.shipped?"d-none":""},i.a.createElement("a",{className:"mr-3 dropdown-item",color:"primary",onClick:this.toggleShip},i.a.createElement(u.FontAwesomeIcon,{className:"mr-1",icon:c.faPaperPlane}),"Envoyer colis")),i.a.createElement(s.NavItem,{className:this.state.shipped?"":"d-none"},i.a.createElement("a",{className:"mr-3 dropdown-item",color:"primary",onClick:this.toggleTrack},i.a.createElement(u.FontAwesomeIcon,{className:"mr-1",icon:c.faTruck}),"Suivre le colis")),i.a.createElement(s.NavItem,{className:this.state.shipped?"":"d-none"},i.a.createElement("a",{className:"mr-3 dropdown-item",color:"primary",onClick:this.cancel},i.a.createElement(u.FontAwesomeIcon,{className:"mr-1",icon:c.faBan}),"Annuler l'envoi"))))))))),i.a.createElement(s.Modal,{isOpen:this.state.modalShip,toggle:this.toggleShip},i.a.createElement(s.ModalHeader,{toggle:this.toggleShip},"Envoyer le colis"),i.a.createElement(s.ModalBody,null,i.a.createElement(s.Form,null,i.a.createElement(s.Row,null,i.a.createElement(s.Col,{md:5},i.a.createElement(s.Label,{for:"shipment_date"},"Date d'enl\xe8vement")),i.a.createElement(s.Col,{md:7},i.a.createElement(s.Input,{type:"date",name:"shipment_date",id:"shipment_date",onChange:this.handleChange,placeholder:"Date d'enl\xe8vement"}))),i.a.createElement(s.Button,{color:"primary",type:"submit",onClick:function(t){t.preventDefault(),e.ship()},className:"mt-2 pull-right"},"G\xe9n\xe9rer le bordereaux")))),i.a.createElement(s.Modal,{isOpen:this.state.modalTrack,toggle:this.toggleTrack},i.a.createElement(s.ModalHeader,{toggle:this.toggleTrack},"Suivi du colis"),i.a.createElement(s.ModalBody,null,i.a.createElement(s.Table,{className:"table table-condensed table-hover",cellSpacing:"0"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Date"),i.a.createElement("th",null,"Evenement"),i.a.createElement("th",null,"Location"),i.a.createElement("th",null,"Code"))),i.a.createElement("tbody",null,this.state.events?this.state.events.map(function(e){return i.a.createElement("tr",null,i.a.createElement("td",{style:"text-align: left;"},"$",e.date),i.a.createElement("td",{style:"text-align: left;"},"$",e.description),i.a.createElement("td",{style:"text-align: left;"},"$",e.location),i.a.createElement("td",{style:"text-align: left;"},"$",e.code))}):i.a.createElement("tr",null,i.a.createElement("td",{colspan:"4"},"Aucun evenement")))))))}}]),t}(i.a.Component);E.RATE_ORDER="/api/carrier/rate",E.SHIP_ORDER="/api/carrier/ship",E.CANCEL_ORDER="/api/carrier/cancel",E.TRACK_ORDER="/api/carrier/track",t.a=E},763:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=a(5),c=a.n(s),u=a(4),d=a.n(u),p=a(2),m=(a.n(p),a(6)),h=(a.n(m),a(1)),f=a(7),E=(a.n(f),function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}()),b=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.orderId=e.match.params.orderId,a.state={order:[],hasMenu:!0},a}return o(t,e),E(t,[{key:"getOrder",value:function(){var e=this;c()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_ORDER_URL+"/"+this.orderId,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({order:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getOrder()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.orderId=e.match.params.orderId,this.getOrder()}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(d.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},i.a.createElement(p.Row,null,i.a.createElement(p.Col,{md:"12"},i.a.createElement(p.Card,{className:"main-card mb-3"},i.a.createElement(p.CardBody,null,i.a.createElement(p.CardTitle,null,"Commande N\xb0",this.state.order.id,i.a.createElement("div",{className:"pull-right mb-2 mr-2 badge badge-pill badge-success"},this.state.order.item)),this.state.hasMenu?i.a.createElement(v,{props:this.props}):""))))))}}]),t}(i.a.Component);b.GET_ORDER_URL="/api/order",t.a=b;var v=function(e){return i.a.createElement(p.Nav,{pills:!0,justified:!0},i.a.createElement(p.NavItem,null,i.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/edition"?"active":"",tag:function(e){return i.a.createElement(m.Link,e)},to:e.props.match.url+"/edition"},i.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Edition")),i.a.createElement(p.NavItem,null,i.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/recettes"?"active":"",tag:function(e){return i.a.createElement(m.Link,e)},to:e.props.match.url+"/recettes"},i.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Recettes")),i.a.createElement(p.NavItem,null,i.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/commentaire"?"active":"",tag:function(e){return i.a.createElement(m.Link,e)},to:e.props.match.url+"/commentaire"},i.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Commentaires")),i.a.createElement(p.NavItem,null,i.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/adresse-livraison"?"active":"",tag:function(e){return i.a.createElement(m.Link,e)},to:e.props.match.url+"/adresse-livraison"},i.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Adresse de livraison")),i.a.createElement(p.NavItem,null,i.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/etiquette"?"active":"",tag:function(e){return i.a.createElement(m.Link,e)},to:e.props.match.url+"/etiquette"},i.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Etiquettes")),i.a.createElement(p.NavItem,null,i.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/bordereau"?"active":"",tag:function(e){return i.a.createElement(m.Link,e)},to:e.props.match.url+"/bordereau"},i.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Bordereau")))}},764:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=a(2),c=(a.n(s),a(5)),u=a.n(c),d=a(4),p=a.n(d),m=a(1),h=a(7),f=(a.n(h),function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}()),E=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.orderId=e.match.params.orderId,a.state={order:{}},a.handleChange=a.handleChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=this,a=e.target,r=a.name,n=a.value;this.setState(function(e){var a=Object.assign({},t.state.order);return a[r]=n,{order:a}})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateOrder()}},{key:"formatData",value:function(){var e=this.state.order;return delete e.id,delete e.disease,delete e.user,delete e.subscription,delete e.invoice,delete e.pet,delete e.plats,delete e.pet,delete e.waybill,delete e.comment,delete e.address,delete e.price_vat,delete e.created_date,null===e.shipment_date?delete e.shipment_date:e.shipment_date=e.shipment_date.slice(0,10),null===e.delivery_date?delete e.delivery_date:e.delivery_date=e.delivery_date.slice(0,10),null===e.expected_delivery_date?delete e.expected_delivery_date:e.expected_delivery_date=e.expected_delivery_date.slice(0,10),e}},{key:"updateOrder",value:function(){var e=this;u()({method:"PATCH",data:this.formatData(),url:"http://172.17.0.1:10000"+t.EDIT_ORDER_URL+"/"+this.orderId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){h.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !"),e.setState({order:t.data})}).catch(function(e){e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"getOrder",value:function(){var e=this;u()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_ORDER_URL+"/"+this.orderId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({order:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getOrder()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.orderId=e.match.params.orderId,this.getOrder()}},{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(p.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},i.a.createElement(s.Card,{className:"main-card mb-3"},i.a.createElement(s.CardBody,null,i.a.createElement(s.CardTitle,null,"Edition commande N\xb0",this.state.order.id),i.a.createElement(s.Form,{onSubmit:this.handleSubmit},i.a.createElement(s.Row,{form:!0},i.a.createElement(s.Col,{md:6},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"status"},"Statut"),i.a.createElement(s.Input,{type:"select",name:"status",id:"status",value:this.state.order.status,onChange:this.handleChange,placeholder:"Statut"},i.a.createElement("option",{value:"created"},"Cr\xe9e"),i.a.createElement("option",{value:"validated"},"Valid\xe9"),i.a.createElement("option",{value:"in_preparation"},"En pr\xe9paration"),i.a.createElement("option",{value:"send"},"Envoy\xe9"),i.a.createElement("option",{value:"delivered"},"Livr\xe9"),i.a.createElement("option",{value:"cancelled"},"Annul\xe9"))))),i.a.createElement(s.Row,{form:!0},i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"price"},"Prix"),i.a.createElement(s.Input,{type:"number",step:".1",name:"price",id:"price",value:this.state.order.price||"",onChange:this.handleChange,placeholder:"Prix"}))),i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"nb_dishes"},"Nb plats"),i.a.createElement(s.Input,{type:"number",step:"1",name:"nb_dishes",id:"nb_dishes",value:this.state.order.nb_dishes||"",onChange:this.handleChange,placeholder:"Nb plats"}))),i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"grams"},"Grammes"),i.a.createElement(s.Input,{type:"number",step:".1",name:"grams",id:"grams",value:this.state.order.grams||"",onChange:this.handleChange,placeholder:"Grammes"})))),i.a.createElement(s.Row,{form:!0},i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"tracking_number"},"N\xb0 de suivi"),i.a.createElement(s.Input,{type:"text",name:"tracking_number",id:"tracking_number",value:this.state.order.tracking_number||"",onChange:this.handleChange,placeholder:"N\xb0 de suivi"}))),i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"pickup_code"},"N\xb0 d'enlevement"),i.a.createElement(s.Input,{type:"text",name:"pickup_code",id:"pickup_code",value:this.state.order.pickup_code||"",onChange:this.handleChange,placeholder:"N\xb0 d'enlevement'"}))),i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"price_shipment"},"Prix transport"),i.a.createElement(s.Input,{type:"number",step:".1",name:"price_shipment",id:"price_shipment",value:this.state.order.price_shipment||"",onChange:this.handleChange,placeholder:"Prix transport"})))),i.a.createElement(s.Row,{form:!0},i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"shipment_date"},"Date d'enlevement"),i.a.createElement(s.Input,{type:"date",name:"shipment_date",id:"shipment_date",value:this.state.order.shipment_date?new Date(this.state.order.shipment_date).toLocaleDateString("fr-CA"):"",onChange:this.handleChange,placeholder:"Date d'enlevement"}))),i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"expected_delivery_date"},"Date de livraison souhait\xe9"),i.a.createElement(s.Input,{type:"date",name:"expected_delivery_date",id:"expected_delivery_date",value:this.state.order.expected_delivery_date?new Date(this.state.order.expected_delivery_date).toLocaleDateString("fr-CA"):"",onChange:this.handleChange,placeholder:"Date de livraison souhait\xe9"}))),i.a.createElement(s.Col,{md:4},i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"delivery_date"},"Date de livraison"),i.a.createElement(s.Input,{type:"date",name:"delivery_date",id:"delivery_date",value:this.state.order.delivery_date?new Date(this.state.order.delivery_date).toLocaleDateString("fr-CA"):"",onChange:this.handleChange,placeholder:"Date de livraison"})))),i.a.createElement(s.FormGroup,null,i.a.createElement(s.Label,{for:"notes"},"Notes"),i.a.createElement(s.Input,{type:"textarea",name:"notes",id:"notes",value:this.state.order.notes||"",onChange:this.handleChange,placeholder:"Notes"})),i.a.createElement(s.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour"))))))}}]),t}(i.a.Component);E.GET_ORDER_URL="/api/order",E.EDIT_ORDER_URL="/api/order",t.a=E},765:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function r(n,o){try{var l=t[n](o),i=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}var i=a(109),s=a.n(i),c=a(0),u=a.n(c),d=a(2),p=(a.n(d),a(5)),m=a.n(p),h=a(4),f=a.n(h),E=a(1),b=a(7),v=(a.n(b),a(53)),y=a.n(v),g=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_=this,C=function(){var e=l(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,m()({method:"GET",url:"http://172.17.0.1:10000"+R.SEARCH_USER_URL+t,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){a=e.data.map(function(e){return{value:e.id,label:e.email,name:"user"}})}).catch(function(e){console.log(e)});case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}},e,_)}));return function(t){return e.apply(this,arguments)}}(),O=function(e,t){if(e.length<3)return[];setTimeout(l(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=t,a.next=3,C(e);case 3:a.t1=a.sent,(0,a.t0)(a.t1);case 5:case"end":return a.stop()}},a,_)})),1e3)},R=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.initialState={user:null,subscription:null,address:null,status:null,price_te:null,price_ti:null,vat_rate:null,nb_price:null,price_shipment:null,tracking_number:null,pickup_code:null,shipment_date:null,delivery_date:null,expected_delivery_date:null,notes:null},a.state={order:a.initialState,subscriptionList:[],addressList:[]},a.handleChange=a.handleChange.bind(a),a.handleUserChange=a.handleUserChange.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a}return o(t,e),g(t,[{key:"handleUserChange",value:function(e){var a=this;if(this.handleChange(e),null==this.state.order.user)return[];m()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_SUBSCRIPTION+this.state.order.user,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){var t=e.data.subscriptions.map(function(e){return{value:e.id,label:e.formula.name+" - "+e.amount+"\u20ac - "+e.status,name:"subscription"}});a.setState({subscriptionList:t})}).catch(function(e){console.log(e.response.data),e.response?b.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?b.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):b.toast.error("Une erreur s'est produite")}),m()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_ADDRESS+this.state.order.user,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){var t=e.data.map(function(e){return{value:e.id,label:e.address+", "+e.city+" "+e.postcode,name:"address"}});a.setState({addressList:t})}).catch(function(e){console.log(e.response.data),e.response?b.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?b.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):b.toast.error("Une erreur s'est produite")})}},{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var a=t,r=a.name,n=a.value,o=this.state.order;o[r]=n,this.setState({order:o})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.postOrder()}},{key:"postOrder",value:function(){var e=this;m()({method:"POST",data:this.state.order,url:"http://172.17.0.1:10000"+t.POST_ORDER_URL,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(t){b.toast.success("La commande a bien \xe9t\xe9 ajout\xe9 !"),e.props.history.push("/commandes")}).catch(function(e){console.log(e.response.data),e.response?b.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?b.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):b.toast.error("Une erreur s'est produite")})}},{key:"render",value:function(){return u.a.createElement(c.Fragment,null,u.a.createElement(f.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},u.a.createElement(d.Card,{className:"main-card mb-3"},u.a.createElement(d.CardBody,null,u.a.createElement(d.CardTitle,null,"Nouvelle commande"),u.a.createElement(d.Form,{onSubmit:this.handleSubmit},u.a.createElement(d.Row,{form:!0},u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"user"},"Utilisateur"),u.a.createElement(y.a,{name:"user",cacheOptions:!0,defaultOptions:!0,onChange:this.handleUserChange,loadOptions:O,className:"basic-multi-select",classNamePrefix:"select"}))),u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"subscription"},"Abonnement"),u.a.createElement(y.a,{name:"subscription",cacheOptions:!0,onChange:this.handleChange,defaultOptions:this.state.subscriptionList,className:"basic-multi-select",classNamePrefix:"select"})))),u.a.createElement(d.Row,null,u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"address"},"Adresse"),u.a.createElement(y.a,{name:"address",cacheOptions:!0,onChange:this.handleChange,defaultOptions:this.state.addressList,className:"basic-multi-select",classNamePrefix:"select"}))),u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"status"},"Statut"),u.a.createElement(d.Input,{type:"select",name:"status",id:"status",onChange:this.handleChange,placeholder:"Statut"},u.a.createElement("option",{value:"created"},"Cr\xe9e"),u.a.createElement("option",{value:"validated"},"Valid\xe9"),u.a.createElement("option",{value:"in_preparation"},"En pr\xe9paration"),u.a.createElement("option",{value:"send"},"Envoy\xe9"),u.a.createElement("option",{value:"delivered"},"Livr\xe9"),u.a.createElement("option",{value:"cancelled"},"Annul\xe9"))))),u.a.createElement(d.Row,{form:!0},u.a.createElement(d.Col,{md:3},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"price_te"},"Prix HT"),u.a.createElement(d.Input,{type:"number",step:".1",name:"price_te",id:"price_te",onChange:this.handleChange,placeholder:"Prix HT"}))),u.a.createElement(d.Col,{md:3},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"price_ti"},"Prix TTC"),u.a.createElement(d.Input,{type:"number",step:".1",name:"price_ti",id:"price_ti",onChange:this.handleChange,placeholder:"Prix TTC"}))),u.a.createElement(d.Col,{md:3},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"vat_rate"},"TVA %"),u.a.createElement(d.Input,{type:"number",step:".1",name:"vat_rate",id:"vat_rate",onChange:this.handleChange,placeholder:"TVA %"}))),u.a.createElement(d.Col,{md:3},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"nb_price"},"Nombre prix"),u.a.createElement(d.Input,{type:"number",name:"nb_price",id:"nb_price",onChange:this.handleChange,placeholder:"Nombre prix"})))),u.a.createElement(d.Row,{form:!0},u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"price_shipment"},"Prix du transport"),u.a.createElement(d.Input,{type:"number",step:".1",name:"price_shipment",id:"price_shipment",onChange:this.handleChange,placeholder:"Prix du transport \u20ac"}))),u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"tracking_number"},"N\xb0 de suivi"),u.a.createElement(d.Input,{type:"text",name:"tracking_number",id:"tracking_number",onChange:this.handleChange,placeholder:"N\xb0 de suivi"}))),u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"pickup_code"},"N\xb0 d'enlevement"),u.a.createElement(d.Input,{type:"text",name:"pickup_code",id:"pickup_code",onChange:this.handleChange,placeholder:"N\xb0 d'enlevement'"})))),u.a.createElement(d.Row,{form:!0},u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"shipment_date"},"Date d'enlevement"),u.a.createElement(d.Input,{type:"datetime-local",name:"shipment_date",id:"shipment_date",onChange:this.handleChange,placeholder:"Date d'enlevement"}))),u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"expected_delivery_date"},"Date de livraison souhait\xe9"),u.a.createElement(d.Input,{type:"datetime-local",name:"expected_delivery_date",id:"expected_delivery_date",onChange:this.handleChange,placeholder:"Date de livraison souhait\xe9"}))),u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"delivery_date"},"Date de livraison"),u.a.createElement(d.Input,{type:"datetime-local",name:"delivery_date",id:"delivery_date",onChange:this.handleChange,placeholder:"Date de livraison"})))),u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"notes"},"Notes"),u.a.createElement(d.Input,{type:"textarea",name:"notes",id:"notes",onChange:this.handleChange,placeholder:"Notes"})),u.a.createElement(d.Button,{color:"primary",type:"submit",className:"mt-2"},"Ajouter"))))))}}]),t}(u.a.Component);R.POST_ORDER_URL="/api/order",R.GET_USER_SUBSCRIPTION="/api/subscription/user/",R.GET_USER_ADDRESS="/api/addresses/user/",R.SEARCH_USER_URL="/api/user/search/",t.a=R},766:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=a(4),c=a.n(s),u=a(17),d=a(439),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),m=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return o(t,e),p(t,[{key:"render",value:function(){return i.a.createElement(l.Fragment,null,i.a.createElement(u.a,{heading:"Liste des commandes",subheading:"",addLink:"/commandes/nouveau",icon:"pe-7s-drawer icon-gradient bg-happy-itmeo"}),i.a.createElement(c.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},i.a.createElement(d.a,this.props)))}}]),t}(i.a.Component);t.a=m},767:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=a(0),i=a.n(l),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),o="",l="";return"undefined"!==typeof e.match.params.orderId&&(o=e.match.params.orderId),e.location.pathname.includes("bordereau")?l=t.ORDER_WAYBILL:e.location.pathname.includes("etiquette")&&(l=t.ORDER_LABEL),a.state={object:o,url:l},a}return o(t,e),s(t,[{key:"render",value:function(){return i.a.createElement("embed",{src:"http://172.17.0.1:10000"+this.state.url+this.state.object,className:"w-100 h-100",type:"application/pdf"})}}]),t}(i.a.Component);c.ORDER_LABEL="/public/order/label/",c.ORDER_WAYBILL="/public/waybill/",t.a=c}});