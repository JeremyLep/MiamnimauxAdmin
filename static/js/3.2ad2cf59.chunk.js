webpackJsonp([3],{321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n.n(a),o=n(6),i=(n.n(o),n(754)),s=n(755),u=n(756),c=n(757),l=n(371),p=n(115),m=n(18),d=n(19),h=function(e){var t=e.match;return r.a.createElement(a.Fragment,null,r.a.createElement(m.a,null),r.a.createElement("div",{className:"app-main"},r.a.createElement(d.a,null),r.a.createElement("div",{className:"app-main__outer"},r.a.createElement("div",{className:"app-main__inner"},r.a.createElement(o.Route,{path:""+t.url,component:i.a}),r.a.createElement(o.Route,{path:t.url+"/nouveau",component:s.a}),r.a.createElement(o.Route,{path:t.url+"/:subscriptionId/profile",component:u.a}),r.a.createElement(o.Route,{path:t.url+"/:subscriptionId/profile/edition",component:c.a}),r.a.createElement(o.Route,{path:t.url+"/:subscriptionId/profile/animaux",component:l.a}),r.a.createElement(o.Route,{path:t.url+"/:subscriptionId/profile/selection",component:p.a})))))};t.default=h},371:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(2),c=(n.n(u),n(5)),l=n.n(c),p=n(6),m=(n.n(p),n(16)),d=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(p.Link,{to:"/animaux/"+e.id+"/profile/edition"},e.id))}},{Header:"Nom",Footer:"Nom",accessor:"name"},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(p.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Esp\xe8ce",Footer:"Esp\xe8ce",accessor:function(e){return s.a.createElement(p.Link,{to:"/especes/"+e.type.id+"/profile/edition"},e.type.name)}},{Header:"Race",Footer:"Race",accessor:function(e){return s.a.createElement(p.Link,{to:"/races/"+e.breeds.id+"/profile/edition"},e.breeds.name)}},{Header:"Sexe",Footer:"Sexe",accessor:"sexe"},{Header:"Age",Footer:"Age",accessor:function(e){return e.age+" ans "+e.month+" mois"}},{Header:"Poids",Footer:"Poids",accessor:function(e){return e.weight}},{Header:"St\xe9rilis\xe9",Footer:"St\xe9rilis\xe9",accessor:function(e){return e.neutered?"Oui":"Non"}},{Header:"Gestation",Footer:"Gestation",accessor:function(e){return e.pregnant?"Oui":"Non"}},{Header:"Activit\xe9",Footer:"Activit\xe9",accessor:function(e){return 0===e.activity?"peu actif":1===e.activity?"actif":"tr\xe8s actif"}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(m.b)(e.created_date)}}],b=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.subscriptionId=e.match?e.match.params.subscriptionId:null,n.loading=!1,n.pageCount=0,n.state={pets:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getPets(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.pets}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getPets(t,e*t,n),this.loading=!1}},{key:"getPets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_PETS_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_PETS_URL+this.userId:"undefined"!==typeof this.subscriptionId&&null!==this.subscriptionId&&(o=t.GET_SUB_PETS_URL+this.subscriptionId),o+="?limit="+e+"&offset="+a+"&query="+r,l()({method:"get",url:"https://testapi.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.petsTotal/e),n.setState({pets:t.data.pets}),n.state.pets}).catch(function(e){401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(u.Row,null,s.a.createElement(u.Col,{lg:"12"},s.a.createElement(u.Card,{className:"main-card mb-3"},s.a.createElement(u.CardBody,null,s.a.createElement(u.CardTitle,null,"animaux"),s.a.createElement(m.c,{data:null!=this.state.pets?this.state.pets:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);b.GET_ALL_PETS_URL="/api/pets",b.GET_USER_PETS_URL="/api/pet/user/",b.GET_SUB_PETS_URL="/api/pet/subscription/",t.a=b},372:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(2),c=(n.n(u),n(5)),l=n.n(c),p=n(6),m=(n.n(p),n(16)),d=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(p.Link,{to:"/abonnements/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(p.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Animal",Footer:"Animal",accessor:function(e){return s.a.createElement(p.Link,{to:"/animaux/"+e.pet.id+"/profile/edition"},e.pet.name)}},{Header:"Formule",Footer:"Formule",accessor:function(e){return s.a.createElement(p.Link,{to:"/formules/"+e.price.formula.id+"/profile/edition"},e.price.formula.name)}},{Header:"Montant",Footer:"Montant",accessor:function(e){return e.amount+" \u20ac"}},{Header:"Stripe Id",Footer:"Stripe Id",accessor:"stripe_subscription_id"},{Header:"Statut",Footer:"Statut",accessor:function(e){return Object(m.a)(e.status,"running"===e.status?"success":"paused"===e.status?"warning":"cancelled"===e.status?"danger":"info")}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(m.b)(e.created_date)}}],b=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.petId=e.match?e.match.params.petId:null,n.loading=!1,n.pageCount=0,n.state={subscriptions:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getSubscriptions(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.subscriptions}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getSubscriptions(t,e*t,n),this.loading=!1}},{key:"getSubscriptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_SUB_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_SUB_URL+this.userId:"undefined"!==typeof this.petId&&null!==this.petId&&(o=t.GET_PET_SUB_URL+this.petId),o+="?limit="+e+"&offset="+a+"&query="+r,l()({method:"get",url:"https://testapi.miamnimaux.com"+o,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.subscriptionsTotal/e),n.setState({subscriptions:t.data.subscriptions}),n.state.subscriptions}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(u.Row,null,s.a.createElement(u.Col,{lg:"12"},s.a.createElement(u.Card,{className:"main-card mb-3"},s.a.createElement(u.CardBody,null,s.a.createElement(u.CardTitle,null,"Abonnements"),s.a.createElement(m.c,{data:null!=this.state.subscriptions?this.state.subscriptions:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);b.GET_ALL_SUB_URL="/api/subscriptions",b.GET_USER_SUB_URL="/api/subscription/user/",b.GET_PET_SUB_URL="/api/subscription/pet/",t.a=b},754:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(4),c=n.n(u),l=n(17),p=n(372),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return o(t,e),m(t,[{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(l.a,{heading:"Liste des abonnements",subheading:"",addLink:"/abonnements/nouveau",icon:"pe-7s-drawer icon-gradient bg-happy-itmeo"}),s.a.createElement(c.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(p.a,this.props)))}}]),t}(s.a.Component);t.a=d},755:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,o){try{var i=t[r](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}return a("next")})}}var s=n(109),u=n.n(s),c=n(0),l=n.n(c),p=n(2),m=(n.n(p),n(5)),d=n.n(m),h=n(4),f=n.n(h),b=n(1),E=n(7),y=(n.n(E),n(53)),v=n.n(y),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_=this,S=function(){var e=i(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,d()({method:"GET",url:"https://testapi.miamnimaux.com"+U.SEARCH_USER_URL+t,headers:{Authorization:"Bearer "+Object(b.b)().token,"Content-Type":"application/json"}}).then(function(e){n=e.data.map(function(e){return{value:e.id,label:e.email,name:"user"}})}).catch(function(e){console.log(e)});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,_)}));return function(t){return e.apply(this,arguments)}}(),C=function(e,t){if(e.length<3)return[];setTimeout(i(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=t,n.next=3,S(e);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}},n,_)})),1e3)},U=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initialState={amount:0,pet:[],formula:null,user:null},n.state={subscription:n.initialState,petsList:[],formulaList:[]},n.handleChange=n.handleChange.bind(n),n.handleUserChange=n.handleUserChange.bind(n),n.handleFormulaChange=n.handleFormulaChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),g(t,[{key:"handleUserChange",value:function(e){var n=this;if(this.handleChange(e),null==this.state.subscription.user)return[];d()({method:"GET",url:"https://testapi.miamnimaux.com"+t.GET_USER_PETS+this.state.subscription.user,headers:{Authorization:"Bearer "+Object(b.b)().token,"Content-Type":"application/json"}}).then(function(e){var t=e.data.pets.map(function(e){return{value:e.id,label:e.name+" - "+e.age+"ans",name:"pet"}});n.setState({petsList:t})}).catch(function(e){console.log(e.response.data),e.response?E.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?E.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):E.toast.error("Une erreur s'est produite")})}},{key:"getFormulas",value:function(){var e=this;d()({method:"GET",url:"https://testapi.miamnimaux.com"+t.SEARCH_FORMULA_URL,headers:{Authorization:"Bearer "+Object(b.b)().token,"Content-Type":"application/json"}}).then(function(t){var n=t.data.formulas.map(function(e){return{value:e.id,label:e.name+" - ("+e.price.price_ti+"\u20ac)",name:"formula",price:e.price.price_ti}});e.setState({formulaList:n})}).catch(function(e){console.log(e.response.data),e.response?E.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?E.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):E.toast.error("Une erreur s'est produite")})}},{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var n=t,a=n.name,r=n.value,o=this.state.subscription;o[a]=r,this.setState({subscription:o})}},{key:"handleFormulaChange",value:function(e){var t=this.state.subscription;t.amount=e.price,t.formula=e.value,this.setState({subscription:t})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.postSubscription()}},{key:"postSubscription",value:function(){var e=this;d()({method:"POST",data:this.state.subscription,url:"https://testapi.miamnimaux.com"+t.POST_SUBSCRIPTION_URL,headers:{Authorization:"Bearer "+Object(b.b)().token,"Content-Type":"application/json"}}).then(function(t){E.toast.success("L'abonnement a bien \xe9t\xe9 ajout\xe9 !"),e.props.history.push("/abonnements")}).catch(function(e){console.log(e.response.data),e.response?E.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?E.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):E.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getFormulas()}},{key:"render",value:function(){return l.a.createElement(c.Fragment,null,l.a.createElement(f.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},l.a.createElement(p.Card,{className:"main-card mb-3"},l.a.createElement(p.CardBody,null,l.a.createElement(p.CardTitle,null,"Nouvel abonnement"),l.a.createElement(p.Form,{onSubmit:this.handleSubmit},l.a.createElement(p.Row,{form:!0},l.a.createElement(p.Col,{md:6},l.a.createElement(p.FormGroup,null,l.a.createElement(p.Label,{for:"Utilisateur"},"Utilisateur"),l.a.createElement(v.a,{name:"user",cacheOptions:!0,defaultOptions:!0,onChange:this.handleUserChange,loadOptions:C,className:"basic-multi-select",classNamePrefix:"select"}))),l.a.createElement(p.Col,{md:6},l.a.createElement(p.FormGroup,null,l.a.createElement(p.Label,{for:"pet"},"animaux"),l.a.createElement(v.a,{name:"pet",isMulti:!0,cacheOptions:!0,onChange:this.handleChange,defaultOptions:this.state.petsList,className:"basic-multi-select",classNamePrefix:"select"})))),l.a.createElement(p.Row,{form:!0},l.a.createElement(p.Col,{md:6},l.a.createElement(p.FormGroup,null,l.a.createElement(p.Label,{for:"formula"},"Formule"),l.a.createElement(v.a,{name:"formula",cacheOptions:!0,onChange:this.handleFormulaChange,defaultOptions:this.state.formulaList,className:"basic-multi-select",classNamePrefix:"select"}))),l.a.createElement(p.Col,{md:6},l.a.createElement(p.FormGroup,null,l.a.createElement(p.Label,{for:"amount"},"Montant"),l.a.createElement(p.Input,{type:"number",name:"amount",readOnly:!0,id:"amount",value:this.state.subscription.amount,placeholder:"Montant"})))),l.a.createElement(p.Button,{color:"primary",type:"submit",className:"mt-2"},"Ajouter"))))))}}]),t}(l.a.Component);U.POST_SUBSCRIPTION_URL="/api/subscription",U.GET_USER_PETS="/api/pet/user/",U.SEARCH_USER_URL="/api/user/search/",U.SEARCH_FORMULA_URL="/api/formulas",t.a=U},756:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(5),c=n.n(u),l=n(4),p=n.n(l),m=n(2),d=(n.n(m),n(6)),h=(n.n(d),n(1)),f=n(7),b=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),E=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.subscriptionId=e.match.params.subscriptionId,n.state={subscription:[],hasMenu:!0},n}return o(t,e),b(t,[{key:"getSubscription",value:function(){var e=this;c()({method:"GET",url:"https://testapi.miamnimaux.com"+t.GET_SUB_URL+"/"+this.subscriptionId,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({subscription:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getSubscription()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.subscriptionId=e.match.params.subscriptionId,this.getSubscription()}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(p.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(m.Row,null,s.a.createElement(m.Col,{md:"12"},s.a.createElement(m.Card,{className:"main-card mb-3"},s.a.createElement(m.CardBody,null,s.a.createElement(m.CardTitle,null,"Abonnement ",this.state.subscription.id,s.a.createElement("div",{className:"pull-right mb-2 mr-2 badge badge-pill badge-success"},this.state.subscription.status)),this.state.hasMenu?s.a.createElement(y,{props:this.props}):""))))))}}]),t}(s.a.Component);E.GET_SUB_URL="/api/subscription",t.a=E;var y=function(e){return s.a.createElement(m.Nav,{pills:!0,justified:!0},s.a.createElement(m.NavItem,null,s.a.createElement(m.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/edition"?"active":"",tag:function(e){return s.a.createElement(d.Link,e)},to:e.props.match.url+"/edition"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Edition")),s.a.createElement(m.NavItem,null,s.a.createElement(m.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/animaux"?"active":"",tag:function(e){return s.a.createElement(d.Link,e)},to:e.props.match.url+"/animaux"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Animaux")),s.a.createElement(m.NavItem,null,s.a.createElement(m.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/selection"?"active":"",tag:function(e){return s.a.createElement(d.Link,e)},to:e.props.match.url+"/selection"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Recettes s\xe9lectionn\xe9es")))}},757:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),u=n(2),c=(n.n(u),n(5)),l=n.n(c),p=n(4),m=n.n(p),d=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),b=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.subscriptionId=e.match.params.subscriptionId,n.state={subscription:{}},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState(function(e){var n=Object.assign({},t.state.subscription);return n[a]=r,{subscription:n}})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateSubscription()}},{key:"formatData",value:function(){var e=this.state.subscription;return e.user=this.state.subscription.user.id,delete e.id,delete e.user,delete e.pet,delete e.cart,delete e.plats,delete e.price,delete e.stripe_subscription_id,delete e.created_date,e}},{key:"updateSubscription",value:function(){var e=this;l()({method:"PATCH",data:this.formatData(),url:"https://testapi.miamnimaux.com"+t.EDIT_SUB_URL+"/"+this.subscriptionId,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(t){h.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !"),e.setState({subscription:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"getSubscription",value:function(){var e=this;l()({method:"GET",url:"https://testapi.miamnimaux.com"+t.GET_SUB_URL+"/"+this.subscriptionId,headers:{Authorization:"Bearer "+Object(d.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({subscription:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getSubscription()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.subscriptionId=e.match.params.subscriptionId,this.getSubscription()}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(m.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(u.Card,{className:"main-card mb-3"},s.a.createElement(u.CardBody,null,s.a.createElement(u.CardTitle,null,"Edition abonnement ",this.state.subscription.id),s.a.createElement(u.Form,{onSubmit:this.handleSubmit},s.a.createElement(u.Row,{form:!0},s.a.createElement(u.Col,{md:6},s.a.createElement(u.Label,{for:"amount"},"Montant"),s.a.createElement(u.InputGroup,null,s.a.createElement(u.Input,{type:"number",name:"amount",step:".1",id:"amount",value:this.state.subscription.amount||"",onChange:this.handleChange,placeholder:"Montant en \u20ac"}),s.a.createElement(u.InputGroupAddon,{addonType:"append"},"\u20ac"))),s.a.createElement(u.Col,{md:6},s.a.createElement(u.FormGroup,null,s.a.createElement(u.Label,{for:"status"},"Status"),s.a.createElement(u.Input,{type:"select",name:"status",id:"status",value:this.state.subscription.status||"",onChange:this.handleChange,placeholder:"Status"},s.a.createElement("option",{value:"created"},"Cr\xe9e"),s.a.createElement("option",{value:"pending"},"En attente"),s.a.createElement("option",{value:"running"},"En cours"),s.a.createElement("option",{value:"paused"},"En pause"),s.a.createElement("option",{value:"cancelled"},"Annul\xe9"))))),s.a.createElement(u.Row,{form:!0},s.a.createElement(u.Col,{md:6},s.a.createElement(u.FormGroup,null,s.a.createElement(u.Label,{for:"resume_pause_at"},"Date de reprise abonnement (si en pause)"),s.a.createElement(u.Input,{type:"datetime",name:"resume_pause_at",id:"resume_pause_at",value:this.state.subscription.resume_pause_at||"",onChange:this.handleChange,placeholder:"Date de reprise d'abonnement"})))),s.a.createElement(u.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour"))))))}}]),t}(s.a.Component);b.GET_SUB_URL="/api/subscription",b.EDIT_SUB_URL="/api/subscription",t.a=b}});