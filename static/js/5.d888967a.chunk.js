webpackJsonp([5],{324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n.n(r),o=n(6),i=(n.n(o),n(768)),s=n(769),l=n(770),c=n(771),u=n(370),d=n(18),p=n(19),m=function(e){var t=e.match;return a.a.createElement(r.Fragment,null,a.a.createElement(d.a,null),a.a.createElement("div",{className:"app-main"},a.a.createElement(p.a,null),a.a.createElement("div",{className:"app-main__outer"},a.a.createElement("div",{className:"app-main__inner"},a.a.createElement(o.Route,{path:""+t.url,component:c.a}),a.a.createElement(o.Route,{path:t.url+"/nouveau",component:l.a}),a.a.createElement(o.Route,{path:t.url+"/:invoiceId/profile",component:i.a}),a.a.createElement(o.Route,{path:t.url+"/:invoiceId/profile/edition",component:s.a}),a.a.createElement(o.Route,{path:t.url+"/:invoiceId/profile/adresse-facturation",component:u.a})))))};t.default=m},370:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),l=n.n(s),c=n(2),u=(n.n(c),n(5)),d=n.n(u),p=n(4),m=n.n(p),h=n(1),f=n(7),E=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),v=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match.params.userId,n.orderId=e.match.params.orderId,n.invoiceId=e.match.params.invoiceId,n.state={user:{},addresses:[],collapse:null,addressSelected:null},n.toggle=n.toggle.bind(n),n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.chooseAddress=n.chooseAddress.bind(n),n}return i(t,e),E(t,[{key:"handleChange",value:function(e){var t=e.target.getAttribute("index"),n=e.target,a=n.name,o=n.value,i=[].concat(r(this.state.addresses)),s=Object.assign({},i[t]);s[a]=o,i[t]=s,this.setState({addresses:i})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateAddress(e.target.id,e.target.getAttribute("index"))}},{key:"formatData",value:function(e){var t=this.state.addresses[e];return delete t.id,delete t.created_date,delete t.user,delete t.active,t}},{key:"updateAddress",value:function(e,n){d()({method:"PATCH",data:this.formatData(n),url:"http://172.17.0.1:10000"+t.EDIT_ADDRESS_URL+"/"+e,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(e){f.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !")}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"chooseAddress",value:function(e,n){var r=this;e.preventDefault(),d()({method:"PATCH",url:"http://172.17.0.1:10000"+t.CHOOSE_ADDRESS_URL+"/"+n,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(e){r.setState({addresses:e.data}),f.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !")}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"getAddresses",value:function(){var e=this,n=t.GET_ADDRESSES_URL+"/"+this.userId;null!==this.orderId&&"undefined"!==typeof this.orderId&&(n=t.GET_ADDRESS_ORDER_URL+"/"+this.orderId),null!==this.invoiceId&&"undefined"!==typeof this.invoiceId&&(n=t.GET_ADDRESS_INVOICE_URL+"/"+this.invoiceId),d()({method:"GET",url:"http://172.17.0.1:10000"+n,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({addresses:t.data}),e.setState({addressSelected:t.data.find(function(e){return!0===e.active})})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"getUser",value:function(){var e=this;d()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_URL+"/"+this.userId,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({user:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"toggle",value:function(e){var t=e.target.dataset.event;this.setState({collapse:this.state.collapse===Number(t)?0:Number(t)})}},{key:"componentDidMount",value:function(){this.getAddresses(),null!==this.orderId&&"undefined"!==typeof this.orderId||null!==this.invoiceId&&"undefined"!==typeof this.invoiceId||this.getUser()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.userId=e.match.params.userId,this.orderId=e.match.params.orderId,this.invoiceId=e.match.params.invoiceId,this.getAddresses(),null!==this.orderId&&"undefined"!==typeof this.orderId||null!==this.invoiceId&&"undefined"!==typeof this.invoiceId||this.getUser()}},{key:"render",value:function(){var e=this,t=this.state.collapse;return l.a.createElement(s.Fragment,null,l.a.createElement(m.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},l.a.createElement(c.CardTitle,null,"Les adresses de ",this.state.user.firstname," ",this.state.user.lastname),this.state.addresses.map(function(n,r){return l.a.createElement(c.Form,{onSubmit:e.handleSubmit,key:n.id,id:n.id,index:r},l.a.createElement(c.Card,{className:"main-card mb-3"},l.a.createElement(c.CardHeader,null,l.a.createElement("div",{className:"w-100",onClick:e.toggle,"data-event":r},n.city,", ",n.postcode," - ",n.address," - ",n.phone,l.a.createElement("span",{className:"pull-right",id:"main"},!0===n.active?"Addresse par d\xe9faut":l.a.createElement("button",{onClick:function(t){return e.chooseAddress(t,n.id)},className:"btn btn-primary"},"Choisir")))),l.a.createElement(c.Collapse,{isOpen:t===r},l.a.createElement(c.CardBody,null,l.a.createElement(c.Row,{form:!0},l.a.createElement(c.Col,{md:4},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"country"},"Pays"),l.a.createElement(c.Input,{type:"text",name:"country",id:"country",value:n.country,index:r,onChange:e.handleChange,placeholder:"Pays"}))),l.a.createElement(c.Col,{md:5},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"city"},"Ville"),l.a.createElement(c.Input,{type:"text",name:"city",id:"city",value:n.city,index:r,onChange:e.handleChange,placeholder:"Ville"}))),l.a.createElement(c.Col,{md:3},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"postcode"},"Code postal"),l.a.createElement(c.Input,{type:"text",name:"postcode",id:"postcode",value:n.postcode,index:r,onChange:e.handleChange,placeholder:"Code postal"}))),l.a.createElement(c.Col,{md:8},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"address"},"Address"),l.a.createElement(c.Input,{type:"text",name:"address",id:"address",value:n.address,index:r,onChange:e.handleChange,placeholder:"Adresse"}))),l.a.createElement(c.Col,{md:4},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"phone"},"T\xe9l\xe9phone"),l.a.createElement(c.Input,{type:"text",name:"phone",id:"phone",value:n.phone,index:r,onChange:e.handleChange,placeholder:"T\xe9l\xe9phone"}))),l.a.createElement(c.Col,{md:12},l.a.createElement(c.FormGroup,null,l.a.createElement(c.Label,{for:"notes"},"Notes"),l.a.createElement(c.Input,{type:"textarea",name:"notes",id:"notes",value:n.notes,index:r,onChange:e.handleChange,placeholder:"Notes"})))),l.a.createElement(c.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour")))))})))}}]),t}(l.a.Component);v.GET_USER_URL="/api/user",v.GET_ADDRESSES_URL="/api/addresses/user",v.GET_ADDRESS_ORDER_URL="/api/address/order",v.GET_ADDRESS_INVOICE_URL="/api/address/invoice",v.EDIT_ADDRESS_URL="/api/address",v.CHOOSE_ADDRESS_URL="/api/address/choose",t.a=v},442:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(6),p=(n.n(d),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return s.a.createElement("b",null,s.a.createElement(d.Link,{to:"/factures/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return s.a.createElement(d.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,s.a.createElement("br",null),e.user.email)}},{Header:"Montant",Footer:"Montant",accessor:function(e){return e.amount+"\u20ac"}},{Header:"Statut",Footer:"Statut",accessor:function(e){return Object(p.a)("paid"===e.status?"Pay\xe9":"pending"===e.status?"En attente":"Brouillon","success")}},{Header:"Commandes",Footer:"Commandes",accessor:function(e){return s.a.createElement(d.Link,{to:"/commandes/"+e.order.id+"/profile/edition"},e.order?e.order.id:"")}},{Header:"Avoir",Footer:"Avoir",accessor:function(e){return s.a.createElement(d.Link,{to:"/factures/"+(e.credit_note?e.credit_note.id:"")+"/profile/edition"},e.credit_note?e.credit_note.id:"")}},{Header:"Paiement",Footer:"Paiement",accessor:function(e){return s.a.createElement(d.Link,{to:"/paiements/"+(e.payment?e.payment.id:"")+"/profile/edition"},e.payment?e.payment.id:"")}},{Header:"Stripe Id",Footer:"Stripe Id",accessor:"delivery_date"},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(p.b)(e.created_date)}}],E=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.userId=e.match?e.match.params.userId:null,n.orderId=e.match?e.match.params.orderId:null,n.loading=!1,n.pageCount=0,n.state={invoices:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return o(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getInvoices(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.invoices}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getInvoices(t,e*t,n),this.loading=!1}},{key:"getInvoices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t.GET_ALL_INVOICES_URL;"undefined"!==typeof this.userId&&null!==this.userId?o=t.GET_USER_INVOICES_URL+this.userId:"undefined"!==typeof this.orderId&&null!==this.orderId&&(o=t.GET_ORDER_INVOICES_URL+this.orderId),o+="?limit="+e+"&offset="+r+"&query="+a,u()({method:"get",url:"http://172.17.0.1:10000"+o,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.invoicesTotal/e),n.setState({invoices:t.data.invoices}),n.state.invoices}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return s.a.createElement(l.Row,null,s.a.createElement(l.Col,{lg:"12"},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Factures"),s.a.createElement(p.c,{data:null!=this.state.invoices?this.state.invoices:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(s.a.Component);E.GET_ALL_INVOICES_URL="/api/invoices",E.GET_USER_INVOICES_URL="/api/invoice/user/",E.GET_ORDER_INVOICES_URL="/api/invoice/order/",t.a=E},768:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(5),c=n.n(l),u=n(4),d=n.n(u),p=n(2),m=(n.n(p),n(6)),h=(n.n(m),n(1)),f=n(7),E=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),v=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.invoiceId=e.match.params.invoiceId,n.state={invoice:[],hasMenu:!0},n}return o(t,e),E(t,[{key:"getInvoice",value:function(){var e=this;c()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_ORDER_URL+"/"+this.invoiceId,headers:{Authorization:"Bearer "+Object(h.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({invoice:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getInvoice()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.invoiceId=e.match.params.invoiceId,this.getInvoice()}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(d.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(p.Row,null,s.a.createElement(p.Col,{md:"12"},s.a.createElement(p.Card,{className:"main-card mb-3"},s.a.createElement(p.CardBody,null,s.a.createElement(p.CardTitle,null,"Facture N\xb0",this.state.invoice.id,s.a.createElement("div",{className:"pull-right mb-2 mr-2 badge badge-pill badge-success"},this.state.invoice.item)),this.state.hasMenu?s.a.createElement(b,{props:this.props}):""))))))}}]),t}(s.a.Component);v.GET_ORDER_URL="/api/invoice",t.a=v;var b=function(e){return s.a.createElement(p.Nav,{pills:!0,justified:!0},s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/edition"?"active":"",tag:function(e){return s.a.createElement(m.Link,e)},to:e.props.match.url+"/edition"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Edition")),s.a.createElement(p.NavItem,null,s.a.createElement(p.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/adresse-facturation"?"active":"",tag:function(e){return s.a.createElement(m.Link,e)},to:e.props.match.url+"/adresse-facturation"},s.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Adresse de facturation")))}},769:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(2),c=(n.n(l),n(5)),u=n.n(c),d=n(4),p=n.n(d),m=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),E=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.invoiceId=e.match.params.invoiceId,n.state={invoice:{}},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return o(t,e),f(t,[{key:"handleChange",value:function(e){var t=this,n=e.target,r=n.name,a=n.value;this.setState(function(e){var n=Object.assign({},t.state.invoice);return n[r]=a,{invoice:n}})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateInvoice()}},{key:"formatData",value:function(){var e=this.state.invoice;return delete e.id,delete e.credit_note,delete e.order,delete e.payment,delete e.stripe_invoice_id,delete e.stripe_invoice_url,delete e.promo_code,delete e.user,delete e.address,delete e.created_date,e}},{key:"updateInvoice",value:function(){var e=this;u()({method:"PATCH",data:this.formatData(),url:"http://172.17.0.1:10000"+t.EDIT_INVOICE_URL+"/"+this.invoiceId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){h.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !"),e.setState({invoice:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"getInvoice",value:function(){var e=this;u()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_INVOICE_URL+"/"+this.invoiceId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({invoice:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getInvoice()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.invoiceId=e.match.params.invoiceId,this.getInvoice()}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(p.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(l.Card,{className:"main-card mb-3"},s.a.createElement(l.CardBody,null,s.a.createElement(l.CardTitle,null,"Edition facture N\xb0",this.state.invoice.id),s.a.createElement(l.Form,{onSubmit:this.handleSubmit},s.a.createElement(l.Row,{form:!0},s.a.createElement(l.Col,{md:4},s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"amount"},"Montant"),s.a.createElement(l.Input,{type:"number",step:".1",name:"amount",id:"amount",value:this.state.invoice.amount||"",onChange:this.handleChange,placeholder:"Montant"})))),s.a.createElement(l.Row,{form:!0},s.a.createElement(l.Col,{md:4},s.a.createElement(l.FormGroup,null,s.a.createElement(l.Label,{for:"status"},"Statut"),s.a.createElement(l.Input,{type:"select",name:"status",id:"status",value:this.state.invoice.status||"",onChange:this.handleChange,placeholder:"Statut"},s.a.createElement("option",{value:"draft"},"Brouillon"),s.a.createElement("option",{value:"pending"},"En attente"),s.a.createElement("option",{value:"paid"},"Pay\xe9"))))),s.a.createElement(l.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour"))))))}}]),t}(s.a.Component);E.GET_INVOICE_URL="/api/invoice",E.EDIT_INVOICE_URL="/api/invoice",t.a=E},770:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(a,o){try{var i=t[a](o),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}var s=n(109),l=n.n(s),c=n(0),u=n.n(c),d=n(2),p=(n.n(d),n(5)),m=n.n(p),h=n(4),f=n.n(h),E=n(1),v=n(7),b=(n.n(v),n(53)),y=n.n(b),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=this,C=function(){var e=i(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,m()({method:"GET",url:"http://172.17.0.1:10000"+S.SEARCH_USER_URL+t,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){n=e.data.map(function(e){return{value:e.id,label:e.email,name:"user"}})}).catch(function(e){console.log(e)});case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}},e,g)}));return function(t){return e.apply(this,arguments)}}(),I=function(e,t){if(e.length<3)return[];setTimeout(i(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=t,n.next=3,C(e);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}},n,g)})),1e3)},S=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initialState={user:null,credit_note:null,address:null,order:null,payment:null,price_te:null,price_ti:null,vat_rate:null,status:null},n.state={invoice:n.initialState,invoiceList:[],addressList:[],paymentList:[],orderList:[]},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleUserChange=n.handleUserChange.bind(n),n}return o(t,e),_(t,[{key:"handleUserChange",value:function(e){var n=this;if(this.handleChange(e),null==this.state.invoice.user)return[];m()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_INVOICE+this.state.invoice.user,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){var t=e.data.invoices.map(function(e){return e.price_ti<0?"":{value:e.id,label:e.created_date+" - "+e.price_ti+"\u20ac",name:"invoice"}});n.setState({creditNoteList:t})}).catch(function(e){console.log(e.response.data),e.response?v.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?v.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):v.toast.error("Une erreur s'est produite")}),m()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_ADDRESS+this.state.invoice.user,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){var t=e.data.map(function(e){return{value:e.id,label:e.address+", "+e.city+" "+e.postcode,name:"address"}});n.setState({addressList:t})}).catch(function(e){console.log(e.response.data),e.response?v.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?v.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):v.toast.error("Une erreur s'est produite")}),m()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_ORDER+this.state.invoice.user,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){var t=e.data.orders.map(function(e){return{value:e.id,label:e.created_date+" - "+e.price_ti+"\u20ac",name:"order"}});n.setState({orderList:t})}).catch(function(e){console.log(e.response.data),e.response?v.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?v.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):v.toast.error("Une erreur s'est produite")}),m()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_USER_PAYMENT+this.state.invoice.user,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(e){var t=e.data.payments.map(function(e){return{value:e.id,label:e.stripe_payment_id+" - "+e.amount+"\u20ac",name:"payment"}});n.setState({paymentList:t})}).catch(function(e){console.log(e.response.data),e.response?v.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?v.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):v.toast.error("Une erreur s'est produite")})}},{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var n=t,r=n.name,a=n.value,o=this.state.invoice;o[r]=a,this.setState({invoice:o})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.postInvoice()}},{key:"postInvoice",value:function(){var e=this;m()({method:"POST",data:this.state.invoice,url:"http://172.17.0.1:10000"+t.POST_INVOICE_URL,headers:{Authorization:"Bearer "+Object(E.b)().token,"Content-Type":"application/json"}}).then(function(t){v.toast.success("La facture a bien \xe9t\xe9 ajout\xe9 !"),e.props.history.push("/factures")}).catch(function(e){console.log(e.response.data),e.response?v.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?v.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):v.toast.error("Une erreur s'est produite")})}},{key:"render",value:function(){return u.a.createElement(c.Fragment,null,u.a.createElement(f.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},u.a.createElement(d.Card,{className:"main-card mb-3"},u.a.createElement(d.CardBody,null,u.a.createElement(d.CardTitle,null,"Nouvelle facture"),u.a.createElement(d.Form,{onSubmit:this.handleSubmit},u.a.createElement(d.Row,{form:!0},u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"user"},"Utilisateur"),u.a.createElement(y.a,{name:"user",cacheOptions:!0,defaultOptions:!0,onChange:this.handleUserChange,loadOptions:I,className:"basic-multi-select",classNamePrefix:"select"}))),u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"credit_note"},"Facture"),u.a.createElement(y.a,{name:"credit_note",cacheOptions:!0,onChange:this.handleChange,defaultOptions:this.state.creditNoteList,className:"basic-multi-select",classNamePrefix:"select"})))),u.a.createElement(d.Row,null,u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"address"},"Adresse"),u.a.createElement(y.a,{name:"address",cacheOptions:!0,onChange:this.handleChange,defaultOptions:this.state.addressList,className:"basic-multi-select",classNamePrefix:"select"}))),u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"order"},"Commande"),u.a.createElement(y.a,{name:"order",cacheOptions:!0,onChange:this.handleChange,defaultOptions:this.state.orderList,className:"basic-multi-select",classNamePrefix:"select"})))),u.a.createElement(d.Row,null,u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"payment"},"Paiement"),u.a.createElement(y.a,{name:"payment",cacheOptions:!0,onChange:this.handleChange,defaultOptions:this.state.paymentList,className:"basic-multi-select",classNamePrefix:"select"})))),u.a.createElement(d.Row,{form:!0},u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"price_te"},"Prix HT"),u.a.createElement(d.Input,{type:"number",step:".1",name:"price_te",id:"price_te",onChange:this.handleChange,placeholder:"Prix HT"}))),u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"price_ti"},"Prix TTC"),u.a.createElement(d.Input,{type:"number",step:".1",name:"price_ti",id:"price_ti",onChange:this.handleChange,placeholder:"Prix TTC"}))),u.a.createElement(d.Col,{md:4},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"vat_rate"},"TVA %"),u.a.createElement(d.Input,{type:"number",step:".1",name:"vat_rate",id:"vat_rate",onChange:this.handleChange,placeholder:"TVA %"})))),u.a.createElement(d.Row,{form:!0},u.a.createElement(d.Col,{md:6},u.a.createElement(d.FormGroup,null,u.a.createElement(d.Label,{for:"status"},"Statut"),u.a.createElement(d.Input,{type:"select",name:"status",id:"status",onChange:this.handleChange,placeholder:"Statut"},u.a.createElement("option",{value:"draft"},"Brouillon"),u.a.createElement("option",{value:"pending"},"En attente"),u.a.createElement("option",{value:"paid"},"Pay\xe9"))))),u.a.createElement(d.Button,{color:"primary",type:"submit",className:"mt-2"},"Ajouter"))))))}}]),t}(u.a.Component);S.POST_INVOICE_URL="/api/invoice",S.GET_USER_INVOICE="/api/invoice/user/",S.GET_USER_ADDRESS="/api/addresses/user/",S.GET_USER_ORDER="/api/order/user/",S.GET_USER_PAYMENT="/api/payment/user/",S.SEARCH_USER_URL="/api/user/search/",t.a=S},771:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(4),c=n.n(l),u=n(17),d=n(442),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return o(t,e),p(t,[{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(u.a,{heading:"Liste des factures",subheading:"",addLink:"/factures/nouveau",icon:"pe-7s-drawer icon-gradient bg-happy-itmeo"}),s.a.createElement(c.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},s.a.createElement(d.a,this.props)))}}]),t}(s.a.Component);t.a=m}});