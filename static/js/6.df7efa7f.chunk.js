webpackJsonp([6],{327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n.n(o),r=n(6),i=(n.n(r),n(780)),c=n(782),l=n(783),u=n(784),s=n(444),p=n(18),d=n(19),m=function(e){var t=e.match;return a.a.createElement(o.Fragment,null,a.a.createElement(p.a,null),a.a.createElement("div",{className:"app-main"},a.a.createElement(d.a,null),a.a.createElement("div",{className:"app-main__outer"},a.a.createElement("div",{className:"app-main__inner"},a.a.createElement(r.Route,{path:""+t.url,component:i.a}),a.a.createElement(r.Route,{path:t.url+"/nouveau",component:u.a}),a.a.createElement(r.Route,{path:t.url+"/:couponId/profile",component:c.a}),a.a.createElement(r.Route,{path:t.url+"/:couponId/profile/edition",component:l.a}),a.a.createElement(r.Route,{path:t.url+"/:couponId/profile/code-promo",component:s.a})))))};t.default=m},444:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),u=(n.n(l),n(5)),s=n.n(u),p=n(6),d=(n.n(p),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return c.a.createElement("b",null,c.a.createElement(p.Link,{to:"/code-promo/"+e.id+"/profile/edition"},e.id))}},{Header:"Utilisateur",Footer:"Utilisateur",accessor:function(e){return e.user?c.a.createElement(p.Link,{to:"/utilisateurs/"+e.user.id+"/profile/edition"},e.user.firstname," ",e.user.lastname,c.a.createElement("br",null),e.user.email):""}},{Header:"Coupon",Footer:"Coupon",accessor:function(e){return c.a.createElement(p.Link,{to:"/coupons/"+e.coupon.id+"/profile/edition"},e.coupon.name)}},{Header:"Nom",Footer:"Nom",accessor:"name"},{Header:"Code",Footer:"Code",accessor:function(e){return Object(d.a)(e.code,"info")}},{Header:"Description",Footer:"Description",accessor:"description"},{Header:"Date d'expiration",Footer:"Date d'expiration",accessor:function(e){return Object(d.b)(e.expired_date)}},{Header:"Utilis\xe9",Footer:"Utilis\xe9",accessor:function(e){return Object(d.a)(e.used?"utilis\xe9":"non utilis\xe9","success")}},{Header:"Date d'utilistion",Footer:"Date d'utilistion",accessor:function(e){return Object(d.b)(e.used_date)}},{Header:"Code apporteur",Footer:"Code apporteur",accessor:function(e){return Object(d.a)(e.apporteur_code?e.apporteur_code:"","info")}},{Header:"Actif",Footer:"Actif",accessor:function(e){return Object(d.a)(e.active?"actif":"non actif","success")}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(d.b)(e.created_date)}},{Header:"Stripe Id",Footer:"Stripe Id",accessor:"stripe_promo_code"}],b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.couponId=e.match?e.match.params.couponId:null,n.loading=!1,n.pageCount=0,n.state={promoCodes:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return r(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getPromoCodes(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.promoCodes}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getPromoCodes(t,e*t,n),this.loading=!1}},{key:"getPromoCodes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t.GET_ALL_PROMOCODE_URL;"undefined"!==typeof this.couponId&&null!==this.couponId&&(r=t.GET_COUPON_PROMOCODE_URL+this.couponId),r+="?limit="+e+"&offset="+o+"&query="+a,s()({method:"get",url:"http://172.17.0.1:10000"+r,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.promoCodesTotal/e),n.setState({promoCodes:t.data.promoCodes}),n.state.promoCodes}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return c.a.createElement(l.Row,null,c.a.createElement(l.Col,{lg:"12"},c.a.createElement(l.Card,{className:"main-card mb-3"},c.a.createElement(l.CardBody,null,c.a.createElement(l.CardTitle,null,"Codes promotionnels"),c.a.createElement(d.c,{data:null!=this.state.promoCodes?this.state.promoCodes:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(c.a.Component);b.GET_ALL_PROMOCODE_URL="/api/promo-codes",b.GET_COUPON_PROMOCODE_URL="/api/promo-codes/coupon/",t.a=b},780:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(4),u=n.n(l),s=n(17),p=n(781),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return r(t,e),d(t,[{key:"render",value:function(){return c.a.createElement(i.Fragment,null,c.a.createElement(s.a,{heading:"Liste des coupons",subheading:"",addLink:"/coupons/nouveau",icon:"pe-7s-drawer icon-gradient bg-happy-itmeo"}),c.a.createElement(u.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},c.a.createElement(p.a,this.props)))}}]),t}(c.a.Component);t.a=m},781:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),u=(n.n(l),n(5)),s=n.n(u),p=n(6),d=(n.n(p),n(16)),m=n(1),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=[{Header:"#",Footer:"#",accessor:function(e){return c.a.createElement("b",null,c.a.createElement(p.Link,{to:"/coupons/"+e.id+"/profile/edition"},e.id))}},{Header:"Nom",Footer:"Nom",accessor:"name"},{Header:"Code",Footer:"Code",accessor:function(e){return Object(d.a)(e.code,"info")}},{Header:"Description",Footer:"Description",accessor:"description"},{Header:"Dur\xe9e",Footer:"Dur\xe9e",accessor:"duration"},{Header:"Dur\xe9e en mois",Footer:"Dur\xe9e en mois",accessor:"duration_month"},{Header:"Discount prix",Footer:"Discount prix",accessor:function(e){return e.discount+"\u20ac"}},{Header:"Discount pourcent",Footer:"Discount pourcent",accessor:function(e){return e.percent+"%"}},{Header:"Date d'expiration",Footer:"Date d'expiration",accessor:function(e){return Object(d.b)(e.expired_date)}},{Header:"Utilisation max",Footer:"Utilisation max",accessor:"max_redeem"},{Header:"Nombre d'utilisation",Footer:"Nombre d'utilisation",accessor:"redeem_nb"},{Header:"Stripe Id",Footer:"Stripe Id",accessor:"stripe_coupon"},{Header:"Valide",Footer:"Valide",accessor:function(e){return Object(d.a)(e.valid?"valide":"non valide","success")}},{Header:"Date de cr\xe9ation",Footer:"Date de cr\xe9ation",accessor:function(e){return Object(d.b)(e.created_date)}}],b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.loading=!1,n.pageCount=0,n.state={coupons:[]},n.fetchData=n.fetchData.bind(n),n.handleSearch=n.handleSearch.bind(n),n}return r(t,e),h(t,[{key:"fetchData",value:function(e){return this.loading=!0,this.getCoupons(e.pageSize,e.pageIndex*e.pageSize),this.loading=!1,this.state.coupons}},{key:"handleSearch",value:function(e,t,n){if(n.length<3&&0!==n.length)return null;this.loading=!0,this.getCoupons(t,e*t,n),this.loading=!1}},{key:"getCoupons",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t.GET_ALL_COUPON_URL;r+="?limit="+e+"&offset="+o+"&query="+a,s()({method:"get",url:"http://172.17.0.1:10000"+r,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){return n.pageCount=Math.ceil(t.data.couponsTotal/e),n.setState({coupons:t.data.coupons}),n.state.coupons}).catch(function(e){console.log(e),401===e.response.status?n.props.history.push("/logout"):403===e.response.status&&n.props.history.goBack()})}},{key:"render",value:function(){return c.a.createElement(l.Row,null,c.a.createElement(l.Col,{lg:"12"},c.a.createElement(l.Card,{className:"main-card mb-3"},c.a.createElement(l.CardBody,null,c.a.createElement(l.CardTitle,null,"Coupons"),c.a.createElement(d.c,{data:null!=this.state.coupons?this.state.coupons:[],columns:f,fetchData:this.fetchData,loading:this.loading,pageCount:this.pageCount,handleSearch:this.handleSearch})))))}}]),t}(c.a.Component);b.GET_ALL_COUPON_URL="/api/coupons",t.a=b},782:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(5),u=n.n(l),s=n(4),p=n.n(s),d=n(2),m=(n.n(d),n(1)),h=n(6),f=(n.n(h),n(7)),b=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),E=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.couponId=e.match.params.couponId,n.state={coupon:[],hasMenu:!0},n}return r(t,e),b(t,[{key:"getCoupon",value:function(){var e=this;u()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_COUPON_URL+"/"+this.couponId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({coupon:t.data})}).catch(function(e){console.log(e.response.data),e.response?f.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?f.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):f.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getCoupon()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.couponId=e.match.params.couponId,this.getCoupon()}},{key:"render",value:function(){return c.a.createElement(i.Fragment,null,c.a.createElement(p.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},c.a.createElement(d.Row,null,c.a.createElement(d.Col,{md:"12"},c.a.createElement(d.Card,{className:"main-card mb-3"},c.a.createElement(d.CardBody,null,c.a.createElement(d.CardTitle,null,"Coupon ",this.state.coupon.id,c.a.createElement("div",{className:"pull-right mb-2 mr-2 badge badge-pill badge-success"},this.state.coupon.active?"Actif":"Non actif")),this.state.hasMenu?c.a.createElement(C,{props:this.props}):""))))))}}]),t}(c.a.Component);E.GET_COUPON_URL="/api/coupon",t.a=E;var C=function(e){return c.a.createElement(d.Nav,{pills:!0,justified:!0},c.a.createElement(d.NavItem,null,c.a.createElement(d.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/edition"?"active":"",tag:function(e){return c.a.createElement(h.Link,e)},to:e.props.match.url+"/edition"},c.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Edition")),c.a.createElement(d.NavItem,null,c.a.createElement(d.NavLink,{className:""+e.props.location.pathname===e.props.match.url+"/code-promo"?"active":"",tag:function(e){return c.a.createElement(h.Link,e)},to:e.props.match.url+"/code-promo"},c.a.createElement("i",{className:"nav-link-icon pe-7s-settings"}," "),"Code promo")))}},783:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),u=(n.n(l),n(5)),s=n.n(u),p=n(4),d=n.n(p),m=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.couponId=e.match.params.couponId,n.state={coupon:{}},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return r(t,e),f(t,[{key:"handleChange",value:function(e){var t=this,n=e.target,o=n.name,a=n.value;this.setState(function(e){var n=Object.assign({},t.state.coupon);return n[o]=a,{coupon:n}})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateCoupon()}},{key:"formatData",value:function(){var e=this.state.coupon;return console.log(e),e.expired_date=new Date(e.expired_date).toLocaleDateString("fr-CA"),delete e.id,delete e.stripe_coupon,delete e.created_date,console.log(e),e}},{key:"updateCoupon",value:function(){var e=this;s()({method:"PATCH",data:this.formatData(),url:"http://172.17.0.1:10000"+t.EDIT_COUPON_URL+"/"+this.couponId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){h.toast.success("La mise \xe0 jour s'est bien effectu\xe9e !"),e.setState({coupon:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"getCoupon",value:function(){var e=this;s()({method:"GET",url:"http://172.17.0.1:10000"+t.GET_COUPON_URL+"/"+this.couponId,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){e.setState({coupon:t.data})}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"componentDidMount",value:function(){this.getCoupon()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.couponId=e.match.params.couponId,this.getCoupon()}},{key:"render",value:function(){return c.a.createElement(i.Fragment,null,c.a.createElement(d.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},c.a.createElement(l.Card,{className:"main-card mb-3"},c.a.createElement(l.CardBody,null,c.a.createElement(l.CardTitle,null,"Edition coupon ",this.state.coupon.id),c.a.createElement(l.Form,{onSubmit:this.handleSubmit},c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:6},c.a.createElement(l.Label,{for:"name"},"Nom"),c.a.createElement(l.InputGroup,null,c.a.createElement(l.Input,{type:"text",name:"name",id:"name",value:this.state.coupon.name||"",onChange:this.handleChange,placeholder:"Nom"}))),c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"code"},"Code"),c.a.createElement(l.Input,{type:"text",name:"code",id:"code",value:this.state.coupon.code||"",onChange:this.handleChange,placeholder:"Code"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"duration"},"R\xe9p\xe9tition"),c.a.createElement(l.Input,{type:"select",name:"duration",id:"duration",value:this.state.coupon.duration||"",onChange:this.handleChange,placeholder:"Dur\xe9e"},c.a.createElement("option",{value:"once"},"R\xe9p\xe9ter 1 seul fois"),c.a.createElement("option",{value:"repeating"},'R\xe9p\xe9ter x fois (compl\xe9ter champ "r\xe9p\xe9tition en mois")'),c.a.createElement("option",{value:"forever"},"R\xe9p\xe9ter pour toujours")))),c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"duration_month"},"R\xe9p\xe9tition en mois"),c.a.createElement(l.Input,{type:"number",name:"duration_month",id:"duration_month",value:this.state.coupon.duration_month||"",onChange:this.handleChange,placeholder:"R\xe9p\xe9tition en mois"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"discount"},"Discount prix (\u20ac)"),c.a.createElement(l.Input,{type:"text",name:"discount",id:"discount",value:this.state.coupon.discount||"",onChange:this.handleChange,placeholder:"Discount prix (\u20ac)"}))),c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"percent"},"Discount pourcent (%)"),c.a.createElement(l.Input,{type:"number",name:"percent",id:"percent",value:this.state.coupon.percent||"",onChange:this.handleChange,placeholder:"Discount pourcent (%)"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:4},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"expired_date"},"Date d'expiration"),c.a.createElement(l.Input,{type:"date",name:"expired_date",id:"expired_date",value:this.state.coupon.expired_date?new Date(this.state.coupon.expired_date).toLocaleDateString("fr-CA"):"",onChange:this.handleChange,placeholder:"Date d'expiration"}))),c.a.createElement(l.Col,{md:4},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"max_redeem"},"Utilisation maximum"),c.a.createElement(l.Input,{type:"number",name:"max_redeem",id:"max_redeem",value:this.state.coupon.max_redeem||"",onChange:this.handleChange,placeholder:"Utilisation maximum"}))),c.a.createElement(l.Col,{md:4},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"redeem_nb"},"Nombre d'utilisation"),c.a.createElement(l.Input,{type:"number",name:"redeem_nb",id:"redeem_nb",value:this.state.coupon.redeem_nb||"",onChange:this.handleChange,placeholder:"Nom d'utilisation"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:12},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"description"},"Description"),c.a.createElement(l.Input,{type:"textarea",name:"description",id:"description",value:this.state.coupon.description||"",onChange:this.handleChange,placeholder:"Description"})))),c.a.createElement(l.FormGroup,null,c.a.createElement(l.CustomInput,{type:"checkbox",id:"valid",name:"valid",label:"Valide",defaultChecked:this.state.coupon.valid})),c.a.createElement(l.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour"))))))}}]),t}(c.a.Component);b.GET_COUPON_URL="/api/coupon",b.EDIT_COUPON_URL="/api/coupon",t.a=b},784:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),u=(n.n(l),n(5)),s=n.n(u),p=n(4),d=n.n(p),m=n(1),h=n(7),f=(n.n(h),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initialState={name:null,code:null,duration:null,duration_month:null,discount:null,expired_date:null,max_redeem:null,redeem_nb:null,description:null,valid:!1},n.state={coupon:n.initialState},n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return r(t,e),f(t,[{key:"handleChange",value:function(e){var t=e;"undefined"!==typeof e.target&&(t=e.target),Array.isArray(e)&&(t.value=e.map(function(e){return e.value}),t.name=e[0].name);var n=t,o=n.name,a=n.value,r=(n.label,this.state.coupon);r[o]=a,this.setState({coupon:r})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.postCoupon()}},{key:"postCoupon",value:function(){var e=this;s()({method:"POST",data:this.state.coupon,url:"http://172.17.0.1:10000"+t.POST_COUPON_URL,headers:{Authorization:"Bearer "+Object(m.b)().token,"Content-Type":"application/json"}}).then(function(t){h.toast.success("Le coupon a bien \xe9t\xe9 ajout\xe9 !"),e.props.history.push("/coupons")}).catch(function(e){console.log(e.response.data),e.response?h.toast.error("Une erreur s'est produite: <br/>"+e.response.data.errors.errors.join(" | ")):e.request?h.toast.error("Une erreur s'est produite lors de l`envoie de la requ\xeate"):h.toast.error("Une erreur s'est produite")})}},{key:"render",value:function(){return c.a.createElement(i.Fragment,null,c.a.createElement(d.a,{component:"div",transitionName:"TabsAnimation",transitionAppear:!0,transitionAppearTimeout:0,transitionEnter:!1,transitionLeave:!1},c.a.createElement(l.Card,{className:"main-card mb-3"},c.a.createElement(l.CardBody,null,c.a.createElement(l.CardTitle,null,"Nouveau coupon"),c.a.createElement(l.Form,{onSubmit:this.handleSubmit},c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:6},c.a.createElement(l.Label,{for:"name"},"Nom"),c.a.createElement(l.InputGroup,null,c.a.createElement(l.Input,{type:"text",name:"name",id:"name",onChange:this.handleChange,placeholder:"Nom"}))),c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"code"},"Code"),c.a.createElement(l.Input,{type:"text",name:"code",id:"code",onChange:this.handleChange,placeholder:"Code"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"duration"},"R\xe9p\xe9tition"),c.a.createElement(l.Input,{type:"select",name:"duration",id:"duration",onChange:this.handleChange,placeholder:"Dur\xe9e"},c.a.createElement("option",{value:""},"--- CHOISIR ---"),c.a.createElement("option",{value:"once"},"R\xe9p\xe9ter 1 seul fois"),c.a.createElement("option",{value:"repeating"},'R\xe9p\xe9ter x fois (compl\xe9ter champ "r\xe9p\xe9tition en mois")'),c.a.createElement("option",{value:"forever"},"R\xe9p\xe9ter pour toujours")))),c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"duration_month"},"R\xe9p\xe9tition en mois"),c.a.createElement(l.Input,{type:"number",name:"duration_month",id:"duration_month",onChange:this.handleChange,placeholder:"R\xe9p\xe9tition en mois"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"discount"},"Discount prix (\u20ac)"),c.a.createElement(l.Input,{type:"text",name:"discount",id:"discount",onChange:this.handleChange,placeholder:"Discount prix (\u20ac)"}))),c.a.createElement(l.Col,{md:6},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"percent"},"Discount pourcent (%)"),c.a.createElement(l.Input,{type:"number",name:"percent",id:"percent",onChange:this.handleChange,placeholder:"Discount pourcent (%)"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:4},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"expired_date"},"Date d'expiration"),c.a.createElement(l.Input,{type:"date",name:"expired_date",id:"expired_date",onChange:this.handleChange,placeholder:"Date d'expiration"}))),c.a.createElement(l.Col,{md:4},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"max_redeem"},"Utilisation maximum"),c.a.createElement(l.Input,{type:"number",name:"max_redeem",id:"max_redeem",onChange:this.handleChange,placeholder:"Utilisation maximum"}))),c.a.createElement(l.Col,{md:4},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"redeem_nb"},"Nombre d'utilisation"),c.a.createElement(l.Input,{type:"number",name:"redeem_nb",id:"redeem_nb",onChange:this.handleChange,placeholder:"Nom d'utilisation"})))),c.a.createElement(l.Row,{form:!0},c.a.createElement(l.Col,{md:12},c.a.createElement(l.FormGroup,null,c.a.createElement(l.Label,{for:"description"},"Description"),c.a.createElement(l.Input,{type:"textarea",name:"description",id:"description",onChange:this.handleChange,placeholder:"Description"})))),c.a.createElement(l.FormGroup,null,c.a.createElement(l.CustomInput,{type:"checkbox",id:"valid",name:"valid",label:"Valide"})),c.a.createElement(l.Button,{color:"primary",type:"submit",className:"mt-2"},"Mettre \xe0 jour"))))))}}]),t}(c.a.Component);b.POST_COUPON_URL="/api/coupon",t.a=b}});